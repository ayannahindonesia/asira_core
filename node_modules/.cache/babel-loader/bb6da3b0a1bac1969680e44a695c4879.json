{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\pc\\\\Desktop\\\\asira_core\\\\src\\\\components\\\\user\\\\userEdit.js\";\nimport React from 'react';\nimport { Redirect } from 'react-router-dom';\nimport Loader from 'react-loader-spinner';\nimport swal from 'sweetalert';\nimport { createStructuredSelector } from 'reselect';\nimport { connect } from 'react-redux';\nimport { withRouter } from 'react-router';\nimport { withStyles } from '@material-ui/styles';\nimport { compose } from 'redux';\nimport CheckBox from '@material-ui/core/Checkbox';\nimport TextField from '@material-ui/core/TextField';\nimport { getAllRoleFunction } from './../rolePermission/saga';\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\nimport { getUserFunction, patchUserAddFunction } from './saga';\nimport { validateEmail, validatePhone } from '../global/globalFunction';\nimport DropDown from '../subComponent/DropDown';\nimport { getToken } from '../index/token';\n\nconst styles = () => ({\n  container: {\n    flexGrow: 1\n  }\n});\n\nclass userEdit extends React.Component {\n  constructor(...args) {\n    super(...args);\n    this._isMounted = false;\n    this.state = {\n      diKlik: false,\n      errorMessage: '',\n      listRole: {},\n      username: '',\n      password: '',\n      email: '',\n      phone: '',\n      role: 0,\n      bank: 0,\n      userId: 0,\n      loading: true,\n      disabled: true\n    };\n\n    this.refresh = async function () {\n      const param = {\n        status: 'active'\n      };\n      const paramUser = {\n        userId: this.state.userId\n      };\n      const data = await getAllRoleFunction(param);\n      const dataUser = await getUserFunction(paramUser);\n\n      if (data && dataUser) {\n        if (!data.error && !dataUser.error) {\n          const roleUser = dataUser.dataUser && dataUser.dataUser && dataUser.dataUser.roles && dataUser.dataUser.roles[0] || 0;\n          let dataListRole = data.dataRole;\n          const listRoleNew = [];\n          let flagBank = this.isRoleBank(roleUser, dataListRole);\n\n          for (const key in dataListRole) {\n            if (flagBank === this.isRoleBank(dataListRole[key].id, dataListRole)) {\n              listRoleNew.push(dataListRole[key]);\n            }\n          }\n\n          this.setState({\n            listRole: listRoleNew,\n            bank: dataUser.dataUser.bank_id || 0,\n            bank_name: dataUser.dataUser.bank_name,\n            role: roleUser,\n            id: dataUser.dataUser.id,\n            username: dataUser.dataUser.username,\n            password: dataUser.dataUser.password,\n            email: dataUser.dataUser.email,\n            phone: dataUser.dataUser.phone && dataUser.dataUser.phone.substring(2, dataUser.dataUser.phone.length),\n            status: dataUser.dataUser.status\n          });\n        } else {\n          this.setState({\n            errorMessage: data.error || dataUser.error,\n            disabled: true,\n            loading: false\n          });\n        }\n      }\n    };\n\n    this.btnCancel = () => {\n      this.setState({\n        diKlik: true\n      });\n    };\n\n    this.btnSave = () => {\n      if (this.validate()) {\n        const dataUser = {\n          roles: [parseInt(this.state.role)],\n          bank: this.isRoleBank(this.state.role, this.state.listRole) ? parseInt(this.state.bank) : 0,\n          phone: `62${this.state.phone}`,\n          email: this.state.email,\n          status: this.state.status\n        };\n        const param = {\n          id: this.state.userId,\n          dataUser\n        };\n        this.setState({\n          loading: true\n        });\n        this.patchUser(param);\n      }\n    };\n\n    this.patchUser = async function (param) {\n      const data = await patchUserAddFunction(param);\n\n      if (data) {\n        if (!data.error) {\n          swal(\"Success\", \"User berhasil di ubah\", \"success\");\n          this.setState({\n            diKlik: true,\n            loading: false\n          });\n        } else {\n          this.setState({\n            errorMessage: data.error,\n            disabled: true,\n            loading: false\n          });\n        }\n      }\n    };\n\n    this.onChangeCheck = e => {\n      let status = this.state.status;\n\n      if (status === 'active') {\n        status = 'inactive';\n      } else {\n        status = 'active';\n      }\n\n      this.setState({\n        status\n      });\n    };\n\n    this.onChangeTextField = e => {\n      let value = e.target.value;\n      let labelName = e.target.id;\n      let flag = true;\n\n      if (value.includes(' ') || value.includes('\\'') || value.includes('\"') || value.includes(',')) {\n        flag = false;\n      }\n\n      if (labelName === 'phone' && isNaN(value)) {\n        flag = false;\n      }\n\n      if (flag) {\n        this.setState({\n          [labelName]: value\n        });\n      }\n    };\n\n    this.onChangeDropDown = e => {\n      const labelName = e.target.name.toString().toLowerCase();\n      this.setState({\n        [labelName]: e.target.value\n      });\n    };\n\n    this.isRoleBank = (role, listRole) => {\n      let flag = false;\n      const dataRole = listRole;\n\n      if (role && role !== 0) {\n        for (const key in dataRole) {\n          if (dataRole[key].id.toString() === role.toString() && dataRole[key].system.toString().toLowerCase().includes('dashboard')) {\n            flag = true;\n            break;\n          }\n        }\n      }\n\n      return flag;\n    };\n\n    this.validate = () => {\n      let flag = true;\n      let errorMessage = '';\n      console.log(this.state.bank);\n      console.log(this.state.listRole);\n      console.log(this.state.role);\n\n      if (!this.state.username || this.state.username.length === 0) {\n        flag = false;\n        errorMessage = 'Mohon input username dengan benar';\n      } else if (!this.state.role || this.state.role === 0) {\n        flag = false;\n        errorMessage = 'Mohon input role dengan benar';\n      } else if (!this.state.email || this.state.email.length === 0 || !validateEmail(this.state.email)) {\n        flag = false;\n        errorMessage = 'Mohon input email dengan benar';\n      } else if (!this.state.phone || this.state.phone.length === 0 || !validatePhone(`62${this.state.phone}`)) {\n        flag = false;\n        errorMessage = 'Mohon input kontak pic dengan benar';\n      } else if (this.isRoleBank(this.state.role, this.state.listRole) && (!this.state.bank || this.state.bank === 0)) {\n        flag = false;\n        errorMessage = 'Mohon input bank dengan benar';\n      } else {\n        errorMessage = '';\n      }\n\n      this.setState({\n        errorMessage\n      });\n      return flag;\n    };\n  }\n\n  componentDidMount() {\n    this._isMounted = true;\n    this.setState({\n      userId: this.props.match.params.id\n    }, () => {\n      this.refresh();\n    });\n  }\n\n  componentWillUnmount() {\n    this._isMounted = false;\n  }\n\n  UNSAFE_componentWillReceiveProps(newProps) {\n    this.setState({\n      errorMessage: newProps.error\n    });\n  }\n\n  render() {\n    if (this.state.diKlik) {\n      return React.createElement(Redirect, {\n        to: \"/listUser\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 253\n        },\n        __self: this\n      });\n    } else if (this.state.loading) {\n      return React.createElement(\"div\", {\n        key: \"zz\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 256\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        align: \"center\",\n        colSpan: 6,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 257\n        },\n        __self: this\n      }, React.createElement(Loader, {\n        type: \"Circles\",\n        color: \"#00BFFF\",\n        height: \"40\",\n        width: \"40\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 258\n        },\n        __self: this\n      })));\n    } else if (getToken()) {\n      return React.createElement(\"div\", {\n        className: \"container mt-4\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 269\n        },\n        __self: this\n      }, React.createElement(\"h3\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 270\n        },\n        __self: this\n      }, \"Akun - Edit\"), React.createElement(\"hr\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 272\n        },\n        __self: this\n      }), React.createElement(\"form\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 274\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"form-group row\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 275\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"col-12\",\n        style: {\n          color: \"red\",\n          fontSize: \"15px\",\n          textAlign: 'left',\n          marginBottom: '2vh'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 276\n        },\n        __self: this\n      }, this.state.errorMessage)), React.createElement(\"div\", {\n        className: \"form-group row\",\n        style: {\n          marginBottom: 40\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 281\n        },\n        __self: this\n      }, React.createElement(\"label\", {\n        className: \"col-sm-2 col-form-label\",\n        style: {\n          height: 3.5\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 282\n        },\n        __self: this\n      }, \"Id Akun\"), React.createElement(\"label\", {\n        className: \"col-sm-1 col-form-label\",\n        style: {\n          height: 3.5\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 285\n        },\n        __self: this\n      }, \":\"), React.createElement(\"div\", {\n        className: \"col-sm-4 col-form-label\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 288\n        },\n        __self: this\n      }, this.state.id)), React.createElement(\"div\", {\n        className: \"form-group row\",\n        style: {\n          marginBottom: 40\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 293\n        },\n        __self: this\n      }, React.createElement(\"label\", {\n        className: \"col-sm-2 col-form-label\",\n        style: {\n          height: 3.5\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 294\n        },\n        __self: this\n      }, \"Username\"), React.createElement(\"label\", {\n        className: \"col-sm-1 col-form-label\",\n        style: {\n          height: 3.5\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 297\n        },\n        __self: this\n      }, \":\"), React.createElement(\"div\", {\n        className: \"col-sm-4 col-form-label\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 300\n        },\n        __self: this\n      }, this.state.username)), React.createElement(\"div\", {\n        className: \"form-group row\",\n        style: {\n          marginBottom: 30\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 305\n        },\n        __self: this\n      }, React.createElement(\"label\", {\n        className: \"col-sm-2 col-form-label\",\n        style: {\n          height: 3.5\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 306\n        },\n        __self: this\n      }, \"Password\"), React.createElement(\"label\", {\n        className: \"col-sm-1 col-form-label\",\n        style: {\n          height: 3.5\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 309\n        },\n        __self: this\n      }, \":\"), React.createElement(\"div\", {\n        className: \"col-sm-4 col-form-label\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 312\n        },\n        __self: this\n      }, \"********\")), React.createElement(\"div\", {\n        className: \"form-group row\",\n        style: {\n          marginBottom: this.isRoleBank(this.state.role, this.state.listRole) ? 7 : 20\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 317\n        },\n        __self: this\n      }, React.createElement(\"label\", {\n        className: \"col-sm-2 col-form-label\",\n        style: {\n          lineHeight: 3.5\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 318\n        },\n        __self: this\n      }, \"Role\"), React.createElement(\"label\", {\n        className: \"col-sm-1 col-form-label\",\n        style: {\n          lineHeight: 3.5\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 321\n        },\n        __self: this\n      }, \":\"), React.createElement(\"div\", {\n        className: \"col-sm-4\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 324\n        },\n        __self: this\n      }, React.createElement(DropDown, {\n        value: this.state.role,\n        label: \"Role\",\n        data: this.state.listRole,\n        id: \"id\",\n        labelName: \"name-system\",\n        onChange: this.onChangeDropDown,\n        fullWidth: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 325\n        },\n        __self: this\n      }))), this.isRoleBank(this.state.role, this.state.listRole) && React.createElement(\"div\", {\n        className: \"form-group row\",\n        style: {\n          marginBottom: 20\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 338\n        },\n        __self: this\n      }, React.createElement(\"label\", {\n        className: \"col-sm-2 col-form-label\",\n        style: {\n          lineHeight: 3.5\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 339\n        },\n        __self: this\n      }, \"Bank\"), React.createElement(\"label\", {\n        className: \"col-sm-1 col-form-label\",\n        style: {\n          lineHeight: 3.5\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 342\n        },\n        __self: this\n      }, \":\"), React.createElement(\"label\", {\n        className: \"col-sm-4 col-form-label\",\n        style: {\n          lineHeight: 3.5\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 345\n        },\n        __self: this\n      }, this.state.bank_name)), React.createElement(\"div\", {\n        className: \"form-group row\",\n        style: {\n          marginBottom: 40\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 351\n        },\n        __self: this\n      }, React.createElement(\"label\", {\n        className: \"col-sm-2 col-form-label\",\n        style: {\n          lineHeight: 1.5\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 352\n        },\n        __self: this\n      }, \"Email\"), React.createElement(\"label\", {\n        className: \"col-sm-1 col-form-label\",\n        style: {\n          lineHeight: 1.5\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 355\n        },\n        __self: this\n      }, \":\"), React.createElement(\"div\", {\n        className: \"col-sm-4\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 358\n        },\n        __self: this\n      }, React.createElement(TextField, {\n        id: \"email\",\n        type: \"email\",\n        onChange: this.onChangeTextField,\n        value: this.state.email,\n        hiddenLabel: true,\n        fullWidth: true,\n        placeholder: \"Email\",\n        style: {\n          border: '1px groove',\n          paddingLeft: '5px'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 359\n        },\n        __self: this\n      }))), React.createElement(\"div\", {\n        className: \"form-group row\",\n        style: {\n          marginBottom: 20\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 372\n        },\n        __self: this\n      }, React.createElement(\"label\", {\n        className: \"col-sm-2 col-form-label\",\n        style: {\n          lineHeight: 1.5\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 373\n        },\n        __self: this\n      }, \"Kontak PIC\"), React.createElement(\"label\", {\n        className: \"col-sm-1 col-form-label\",\n        style: {\n          lineHeight: 1.5\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 376\n        },\n        __self: this\n      }, \":\"), React.createElement(\"div\", {\n        className: \"col-sm-1\",\n        style: {\n          lineHeight: 1.5,\n          textAlign: 'center',\n          paddingTop: '5px',\n          paddingRight: '0px',\n          paddingLeft: '0px'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 379\n        },\n        __self: this\n      }, \"(+62)\"), React.createElement(\"div\", {\n        className: \"col-sm-3\",\n        style: {\n          paddingLeft: '0px'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 382\n        },\n        __self: this\n      }, React.createElement(TextField, {\n        id: \"phone\",\n        type: \"tel\",\n        onChange: this.onChangeTextField,\n        value: this.state.phone,\n        hiddenLabel: true,\n        fullWidth: true,\n        placeholder: \"Telepon\",\n        style: {\n          border: '1px groove',\n          paddingLeft: '5px'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 383\n        },\n        __self: this\n      }))), React.createElement(\"div\", {\n        className: \"form-group row\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 396\n        },\n        __self: this\n      }, React.createElement(\"label\", {\n        className: \"col-sm-2 col-form-label\",\n        style: {\n          lineHeight: 3.5\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 397\n        },\n        __self: this\n      }, \"Status\"), React.createElement(\"label\", {\n        className: \"col-sm-1 col-form-label\",\n        style: {\n          lineHeight: 3.5\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 400\n        },\n        __self: this\n      }, \":\"), React.createElement(\"div\", {\n        className: \"col-4\",\n        style: {\n          color: \"black\",\n          fontSize: \"15px\",\n          alignItems: 'left',\n          paddingTop: '15px'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 403\n        },\n        __self: this\n      }, React.createElement(FormControlLabel, {\n        control: React.createElement(CheckBox, {\n          color: \"default\",\n          onChange: this.onChangeCheck,\n          checked: this.state.status && this.state.status === 'active' ? true : false,\n          style: {\n            justifyContent: 'left'\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 407\n          },\n          __self: this\n        }),\n        label: this.state.status && this.state.status === 'active' ? \"Aktif\" : \"Tidak Aktif\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 405\n        },\n        __self: this\n      }))), React.createElement(\"div\", {\n        className: \"form-group row\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 420\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"col-sm-12 ml-3 mt-3\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 421\n        },\n        __self: this\n      }, React.createElement(\"input\", {\n        type: \"button\",\n        value: \"Ubah\",\n        className: \"btn btn-success\",\n        onClick: this.btnSave,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 422\n        },\n        __self: this\n      }), React.createElement(\"input\", {\n        type: \"button\",\n        value: \"Batal\",\n        className: \"btn ml-2\",\n        onClick: this.btnCancel,\n        style: {\n          backgroundColor: \"grey\",\n          color: \"white\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 423\n        },\n        __self: this\n      })))));\n    } else if (!getToken()) {\n      return React.createElement(Redirect, {\n        to: \"/login\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 433\n        },\n        __self: this\n      });\n    }\n  }\n\n}\n\nexport function mapDispatchToProps(dispatch) {\n  return {//   getSourceTransaction: () => {\n    //     dispatch(sourceTransactionRequest());\n    //   handleRedirect: (route) => {\n    //     dispatch(push(route));\n    //   },\n  };\n}\nexport const mapStateToProps = createStructuredSelector({// user: getUserState(),\n  // menu: getMenu(),\n});\nconst withConnect = connect(mapStateToProps, mapDispatchToProps);\nconst withStyle = withStyles(styles);\nexport default compose(withConnect, withStyle, withRouter)(userEdit);","map":{"version":3,"sources":["C:/Users/pc/Desktop/asira_core/src/components/user/userEdit.js"],"names":["React","Redirect","Loader","swal","createStructuredSelector","connect","withRouter","withStyles","compose","CheckBox","TextField","getAllRoleFunction","FormControlLabel","getUserFunction","patchUserAddFunction","validateEmail","validatePhone","DropDown","getToken","styles","container","flexGrow","userEdit","Component","_isMounted","state","diKlik","errorMessage","listRole","username","password","email","phone","role","bank","userId","loading","disabled","refresh","param","status","paramUser","data","dataUser","error","roleUser","roles","dataListRole","dataRole","listRoleNew","flagBank","isRoleBank","key","id","push","setState","bank_id","bank_name","substring","length","btnCancel","btnSave","validate","parseInt","patchUser","onChangeCheck","e","onChangeTextField","value","target","labelName","flag","includes","isNaN","onChangeDropDown","name","toString","toLowerCase","system","console","log","componentDidMount","props","match","params","componentWillUnmount","UNSAFE_componentWillReceiveProps","newProps","render","color","fontSize","textAlign","marginBottom","height","lineHeight","border","paddingLeft","paddingTop","paddingRight","alignItems","justifyContent","backgroundColor","mapDispatchToProps","dispatch","mapStateToProps","withConnect","withStyle"],"mappings":"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","sourcesContent":["import React from 'react'\r\nimport { Redirect } from 'react-router-dom'\r\nimport Loader from 'react-loader-spinner'\r\nimport swal from 'sweetalert';\r\nimport { createStructuredSelector } from 'reselect';\r\nimport { connect } from 'react-redux';\r\nimport { withRouter } from 'react-router';\r\nimport { withStyles } from '@material-ui/styles';\r\nimport { compose } from 'redux';\r\nimport CheckBox from '@material-ui/core/Checkbox';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport { getAllRoleFunction } from './../rolePermission/saga'\r\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\r\nimport { getUserFunction, patchUserAddFunction } from './saga';\r\nimport { validateEmail, validatePhone } from '../global/globalFunction';\r\nimport DropDown from '../subComponent/DropDown';\r\nimport { getToken } from '../index/token';\r\n\r\nconst styles = () => ({\r\n  container: {\r\n    flexGrow: 1,\r\n  },\r\n});\r\n\r\n\r\nclass userEdit extends React.Component{\r\n    _isMounted = false;\r\n\r\n    state = {\r\n      diKlik:false,\r\n      errorMessage:'',\r\n      listRole : {},\r\n      username: '',\r\n      password: '',\r\n      email:'',\r\n      phone:'',\r\n      role: 0,\r\n      bank: 0,\r\n      userId: 0,\r\n      loading: true,\r\n      disabled:true,\r\n    };\r\n\r\n    componentDidMount(){\r\n      this._isMounted = true;\r\n      \r\n      this.setState({\r\n        userId: this.props.match.params.id,\r\n      },() => {\r\n        this.refresh();\r\n      })\r\n    }\r\n\r\n    componentWillUnmount() {\r\n      this._isMounted = false;\r\n    }\r\n\r\n    refresh = async function(){\r\n      const param = {\r\n        status: 'active',\r\n      };\r\n      \r\n      const paramUser = {\r\n        userId: this.state.userId,\r\n      };\r\n\r\n      const data = await getAllRoleFunction(param);\r\n      const dataUser = await getUserFunction(paramUser);\r\n\r\n      if(data && dataUser) {\r\n          if(!data.error && !dataUser.error) {\r\n            const roleUser = (dataUser.dataUser && dataUser.dataUser && dataUser.dataUser.roles && dataUser.dataUser.roles[0]) || 0;\r\n            \r\n            let dataListRole = data.dataRole;\r\n            const listRoleNew = []\r\n\r\n            let flagBank = this.isRoleBank(roleUser ,dataListRole);\r\n\r\n            for(const key in dataListRole) {\r\n              if(flagBank === this.isRoleBank(dataListRole[key].id, dataListRole)) {\r\n                listRoleNew.push(dataListRole[key])\r\n              }\r\n            }\r\n            \r\n            this.setState({\r\n              listRole: listRoleNew,\r\n              bank: dataUser.dataUser.bank_id || 0,\r\n              bank_name: dataUser.dataUser.bank_name,\r\n              role: roleUser,\r\n              id: dataUser.dataUser.id,\r\n              username: dataUser.dataUser.username,\r\n              password: dataUser.dataUser.password,\r\n              email: dataUser.dataUser.email,\r\n              phone: dataUser.dataUser.phone && dataUser.dataUser.phone.substring(2,dataUser.dataUser.phone.length),\r\n              status: dataUser.dataUser.status,\r\n            })\r\n          } else {\r\n            this.setState({\r\n              errorMessage: data.error || dataUser.error,\r\n              disabled: true,\r\n              loading: false,\r\n            })\r\n          }      \r\n      }\r\n    }\r\n\r\n    btnCancel = ()=>{\r\n        this.setState({diKlik:true})\r\n    }\r\n    UNSAFE_componentWillReceiveProps(newProps){\r\n        this.setState({errorMessage:newProps.error})\r\n    }\r\n\r\n    btnSave=()=>{\r\n      if (this.validate()) {\r\n        const dataUser = {\r\n          roles : [parseInt(this.state.role)],\r\n          bank: this.isRoleBank(this.state.role, this.state.listRole) ? parseInt(this.state.bank) : 0,\r\n          phone : `62${this.state.phone}`,\r\n          email : this.state.email,\r\n          status : this.state.status,\r\n        }\r\n\r\n        const param = {\r\n          id: this.state.userId,\r\n          dataUser,\r\n        }\r\n\r\n        this.setState({loading: true});\r\n        \r\n        this.patchUser(param)\r\n      }\r\n    }\r\n\r\n    patchUser = async function(param) {\r\n      const data = await patchUserAddFunction(param);\r\n\r\n      if(data) {\r\n        if(!data.error) {\r\n          swal(\"Success\",\"User berhasil di ubah\",\"success\")\r\n          this.setState({\r\n            diKlik: true,\r\n            loading: false,\r\n          })\r\n        } else {\r\n          this.setState({\r\n            errorMessage: data.error,\r\n            disabled: true,\r\n            loading: false,\r\n          })\r\n        }      \r\n      }\r\n    }\r\n\r\n\r\n    onChangeCheck = (e) => {\r\n      let status = this.state.status;\r\n\r\n      if(status === 'active') {\r\n        status = 'inactive'\r\n      } else {\r\n        status = 'active'\r\n      }\r\n\r\n      this.setState({\r\n        status,\r\n      });\r\n    };\r\n\r\n    onChangeTextField = (e) => {\r\n      let value = e.target.value;\r\n      let labelName = e.target.id;\r\n      let flag = true;\r\n\r\n      if(value.includes(' ') || value.includes('\\'') || value.includes('\"') || value.includes(',') ) {\r\n        flag = false\r\n      }\r\n\r\n      if(labelName === 'phone' && isNaN(value)) {    \r\n        flag = false \r\n      }\r\n      \r\n      if(flag) {\r\n        this.setState({\r\n          [labelName]: value,\r\n        })\r\n      } \r\n    }\r\n\r\n    onChangeDropDown = (e) => {\r\n      const labelName = e.target.name.toString().toLowerCase();\r\n\r\n      this.setState({\r\n        [labelName]: e.target.value,\r\n      })\r\n    }\r\n\r\n\r\n\r\n    isRoleBank = (role, listRole) => {\r\n      let flag = false;\r\n      const dataRole = listRole;\r\n\r\n      if(role && role !== 0) {\r\n        for(const key in dataRole) {\r\n          if(dataRole[key].id.toString() === role.toString() && dataRole[key].system.toString().toLowerCase().includes('dashboard')) {\r\n            flag = true;\r\n            break;\r\n          }\r\n        }\r\n        \r\n      } \r\n\r\n      return flag;\r\n    }\r\n\r\n    validate = () => {\r\n      let flag = true;\r\n      let errorMessage = '';\r\n      console.log(this.state.bank)\r\n      console.log(this.state.listRole)\r\n      console.log(this.state.role)\r\n      if (!this.state.username || this.state.username.length === 0) {\r\n        flag = false;\r\n        errorMessage = 'Mohon input username dengan benar'\r\n      } else if (!this.state.role || this.state.role === 0) {\r\n        flag = false;\r\n        errorMessage = 'Mohon input role dengan benar'\r\n      } else if (\r\n          !this.state.email || this.state.email.length === 0 || !validateEmail(this.state.email)\r\n        ) {\r\n        flag = false;\r\n        errorMessage = 'Mohon input email dengan benar'\r\n      } else if (!this.state.phone || this.state.phone.length === 0 || !validatePhone(`62${this.state.phone}`)) {\r\n        flag = false;\r\n        errorMessage = 'Mohon input kontak pic dengan benar'\r\n      } else if ( this.isRoleBank(this.state.role, this.state.listRole) && (!this.state.bank || this.state.bank === 0)) {\r\n        flag = false;\r\n        errorMessage = 'Mohon input bank dengan benar'\r\n      } else {\r\n        errorMessage = ''\r\n      }\r\n         \r\n      this.setState({\r\n        errorMessage,\r\n      })\r\n\r\n      return flag;\r\n    }\r\n\r\n    render(){\r\n        if(this.state.diKlik){\r\n            return <Redirect to='/listUser'/>            \r\n        } else if (this.state.loading){\r\n          return  (\r\n            <div  key=\"zz\">\r\n              <div align=\"center\" colSpan={6}>\r\n                <Loader \r\n                  type=\"Circles\"\r\n                  color=\"#00BFFF\"\r\n                  height=\"40\"\t\r\n                  width=\"40\"\r\n                />   \r\n              </div>\r\n            </div>\r\n          )\r\n        } else if(getToken()){\r\n            return(\r\n                <div className=\"container mt-4\">\r\n                 <h3>Akun - Edit</h3>\r\n                 \r\n                 <hr/>\r\n                 \r\n                 <form>\r\n                    <div className=\"form-group row\">   \r\n                      <div className=\"col-12\" style={{color:\"red\",fontSize:\"15px\",textAlign:'left', marginBottom:'2vh'}}>\r\n                        {this.state.errorMessage}\r\n                      </div>    \r\n                    </div>\r\n\r\n                    <div className=\"form-group row\" style={{marginBottom:40}}>                \r\n                      <label className=\"col-sm-2 col-form-label\" style={{height:3.5}}>\r\n                        Id Akun\r\n                      </label>\r\n                      <label className=\"col-sm-1 col-form-label\" style={{height:3.5}}>\r\n                        :\r\n                      </label>\r\n                      <div className=\"col-sm-4 col-form-label\" >\r\n                        {this.state.id}\r\n                      </div>                 \r\n                    </div>\r\n\r\n                    <div className=\"form-group row\" style={{marginBottom:40}}>                \r\n                      <label className=\"col-sm-2 col-form-label\" style={{height:3.5}}>\r\n                        Username\r\n                      </label>\r\n                      <label className=\"col-sm-1 col-form-label\" style={{height:3.5}}>\r\n                        :\r\n                      </label>\r\n                      <div className=\"col-sm-4 col-form-label\" >\r\n                        {this.state.username}                       \r\n                      </div>                 \r\n                    </div>\r\n\r\n                    <div className=\"form-group row\" style={{marginBottom:30}}>                \r\n                      <label className=\"col-sm-2 col-form-label\" style={{height:3.5}}>\r\n                        Password\r\n                      </label>\r\n                      <label className=\"col-sm-1 col-form-label\" style={{height:3.5}}>\r\n                        :\r\n                      </label>\r\n                      <div className=\"col-sm-4 col-form-label\" >\r\n                        ********                       \r\n                      </div>                 \r\n                    </div>\r\n\r\n                    <div className=\"form-group row\" style={{marginBottom:this.isRoleBank(this.state.role,this.state.listRole) ? 7 : 20}}>                   \r\n                      <label className=\"col-sm-2 col-form-label\" style={{lineHeight:3.5}}>\r\n                        Role\r\n                      </label>\r\n                      <label className=\"col-sm-1 col-form-label\" style={{lineHeight:3.5}}>\r\n                        :\r\n                      </label>\r\n                      <div className=\"col-sm-4\">\r\n                        <DropDown\r\n                          value={this.state.role}\r\n                          label=\"Role\"\r\n                          data={this.state.listRole}\r\n                          id=\"id\"\r\n                          labelName=\"name-system\"\r\n                          onChange={this.onChangeDropDown}\r\n                          fullWidth\r\n                        />\r\n                      </div>                 \r\n                    </div>\r\n\r\n                    { this.isRoleBank(this.state.role, this.state.listRole) && \r\n                      <div className=\"form-group row\" style={{marginBottom:20}}>                   \r\n                        <label className=\"col-sm-2 col-form-label\" style={{lineHeight:3.5}}>\r\n                          Bank\r\n                        </label>\r\n                        <label className=\"col-sm-1 col-form-label\" style={{lineHeight:3.5}}>\r\n                          :\r\n                        </label>\r\n                        <label className=\"col-sm-4 col-form-label\" style={{lineHeight:3.5}}>\r\n                          {this.state.bank_name}\r\n                        </label>              \r\n                      </div>\r\n                    }\r\n\r\n                    <div className=\"form-group row\" style={{marginBottom:40}}>                   \r\n                      <label className=\"col-sm-2 col-form-label\" style={{lineHeight:1.5}}>\r\n                        Email\r\n                      </label>\r\n                      <label className=\"col-sm-1 col-form-label\" style={{lineHeight:1.5}}>\r\n                        :\r\n                      </label>\r\n                      <div className=\"col-sm-4\">\r\n                        <TextField\r\n                          id=\"email\"\r\n                          type=\"email\"\r\n                          onChange={this.onChangeTextField}\r\n                          value={this.state.email}\r\n                          hiddenLabel\r\n                          fullWidth\r\n                          placeholder=\"Email\"\r\n                          style={{border:'1px groove', paddingLeft:'5px'}}\r\n                        />\r\n                      </div>                   \r\n                    </div>\r\n\r\n                    <div className=\"form-group row\" style={{marginBottom:20}}>                   \r\n                      <label className=\"col-sm-2 col-form-label\" style={{lineHeight:1.5}}>\r\n                        Kontak PIC\r\n                      </label>\r\n                      <label className=\"col-sm-1 col-form-label\" style={{lineHeight:1.5}}>\r\n                        :\r\n                      </label>\r\n                      <div className=\"col-sm-1\" style={{lineHeight:1.5, textAlign:'center', paddingTop:'5px', paddingRight:'0px', paddingLeft:'0px'}}>\r\n                        (+62)\r\n                      </div>\r\n                      <div className=\"col-sm-3\" style={{paddingLeft:'0px'}}>\r\n                        <TextField\r\n                          id=\"phone\"\r\n                          type=\"tel\"\r\n                          onChange={this.onChangeTextField}\r\n                          value={this.state.phone}\r\n                          hiddenLabel\r\n                          fullWidth\r\n                          placeholder=\"Telepon\"\r\n                          style={{border:'1px groove', paddingLeft:'5px'}}\r\n                        />\r\n                      </div>                   \r\n                    </div>\r\n\r\n                    <div className=\"form-group row\">\r\n                      <label className=\"col-sm-2 col-form-label\" style={{lineHeight:3.5}}>\r\n                        Status\r\n                      </label>\r\n                      <label className=\"col-sm-1 col-form-label\" style={{lineHeight:3.5}}>\r\n                        :\r\n                      </label>\r\n                      <div className=\"col-4\" style={{color:\"black\",fontSize:\"15px\",alignItems:'left', paddingTop: '15px'}}>\r\n                        \r\n                        <FormControlLabel\r\n                          control={\r\n                            <CheckBox       \r\n                              color=\"default\"           \r\n                              onChange={this.onChangeCheck}\r\n                              checked={ this.state.status && this.state.status === 'active' ? true : false }\r\n                              style={{justifyContent:'left'}}\r\n                            />  \r\n                          }\r\n                          label={this.state.status && this.state.status === 'active' ? \"Aktif\" : \"Tidak Aktif\"}\r\n                        />\r\n                        \r\n                      </div>           \r\n                    </div>\r\n                    \r\n                    <div className=\"form-group row\">\r\n                        <div className=\"col-sm-12 ml-3 mt-3\">\r\n                          <input type=\"button\" value=\"Ubah\" className=\"btn btn-success\" onClick={this.btnSave} />\r\n                          <input type=\"button\" value=\"Batal\" className=\"btn ml-2\" onClick={this.btnCancel} style={{backgroundColor:\"grey\",color:\"white\"}}/>\r\n                        </div>\r\n                    </div>\r\n                    \r\n                 </form>\r\n                \r\n                </div>\r\n            )\r\n        }else if(!getToken()){\r\n          return (\r\n              <Redirect to='/login' />\r\n          )    \r\n        }\r\n       \r\n    }\r\n}\r\n\r\nexport function mapDispatchToProps(dispatch) {\r\n    return {\r\n    //   getSourceTransaction: () => {\r\n    //     dispatch(sourceTransactionRequest());\r\n    //   handleRedirect: (route) => {\r\n    //     dispatch(push(route));\r\n    //   },\r\n    };\r\n}\r\n  \r\nexport const mapStateToProps = createStructuredSelector({\r\n  // user: getUserState(),\r\n  // menu: getMenu(),\r\n});\r\n\r\nconst withConnect = connect(\r\n    mapStateToProps,\r\n    mapDispatchToProps\r\n);\r\n\r\nconst withStyle = withStyles(styles);\r\n\r\nexport default compose(\r\n    withConnect,\r\n    withStyle,\r\n    withRouter\r\n  )(userEdit);"]},"metadata":{},"sourceType":"module"}