{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\pc\\\\Desktop\\\\asira_core\\\\src\\\\components\\\\user\\\\userList.js\";\nimport React from 'react';\nimport { Redirect } from 'react-router-dom';\nimport { getAllUserFunction } from './saga';\nimport { checkPermission } from '../global/globalFunction';\nimport { getAllRoleFunction } from '../rolePermission/saga';\nimport { getToken } from '../index/token';\nimport TableComponent from '../subComponent/TableComponent';\nconst columnDataUser = [{\n  id: 'id',\n  numeric: false,\n  label: 'ID Akun'\n}, {\n  id: 'username',\n  numeric: false,\n  label: 'Username'\n}, {\n  id: 'role',\n  numeric: false,\n  label: 'Role'\n}, {\n  id: 'bank_name',\n  numeric: false,\n  label: 'Mitra'\n}, {\n  id: 'status',\n  numeric: false,\n  disablePadding: true,\n  label: 'Status'\n}];\n\nclass UserList extends React.Component {\n  constructor(props) {\n    super(props);\n    this._isMounted = false;\n\n    this.refresh = async function () {\n      const param = {};\n      param.rows = this.state.rowsPerPage;\n      param.page = this.state.page;\n      const data = await getAllUserFunction(param, getAllRoleFunction);\n\n      if (data) {\n        if (!data.error) {\n          const dataListUser = data.dataUser || [];\n\n          if (dataListUser.length !== 0) {\n            for (const key in dataListUser) {\n              dataListUser[key].status = dataListUser[key].status && dataListUser[key].status.toString().toLowerCase() === 'active' ? 'Aktif' : 'Tidak Aktif';\n              dataListUser[key].role = this.findRole(dataListUser[key].roles || [], data.dataRole || []);\n            }\n          }\n\n          this.setState({\n            listUser: dataListUser,\n            totalData: data.totalData,\n            loading: false\n          });\n        } else {\n          this.setState({\n            errorMessage: data.error,\n            loading: false\n          });\n        }\n      }\n    };\n\n    this.findRole = (roleUser, dataRole) => {\n      let role = '';\n\n      for (const keyRole in roleUser) {\n        for (const key in dataRole) {\n          if (dataRole[key].id === roleUser[keyRole]) {\n            if (role.trim().length !== 0) {\n              role += ', ';\n            }\n\n            role += `${dataRole[key].name} (${dataRole[key].system})`;\n          }\n        }\n      }\n\n      return role;\n    };\n\n    this.onChangePage = current => {\n      this.setState({\n        loading: true,\n        page: current\n      }, () => {\n        if (this.state.paging) {\n          this.refresh();\n        }\n\n        ;\n      });\n    };\n\n    this.state = {\n      paging: true,\n      loading: true,\n      listUser: [],\n      page: 1,\n      rowsPerPage: 10,\n      totalData: 0\n    };\n  }\n\n  componentDidMount() {\n    this._isMounted = true;\n    this.refresh();\n  }\n\n  componentWillUnmount() {\n    this._isMounted = false;\n  }\n\n  render() {\n    if (getToken()) {\n      return React.createElement(\"div\", {\n        style: {\n          padding: 0\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 123\n        },\n        __self: this\n      }, React.createElement(TableComponent, {\n        id: \"id\",\n        title: 'Akun - List',\n        paging: this.state.paging,\n        loading: this.state.loading,\n        columnData: columnDataUser,\n        data: this.state.listUser,\n        page: this.state.page,\n        rowsPerPage: this.state.rowsPerPage,\n        totalData: this.state.totalData,\n        onChangePage: this.onChangePage,\n        permissionEdit: checkPermission('core_user_patch') ? '/editUser/' : null,\n        permissionDetail: checkPermission('core_user_details') ? '/detailUser/' : null,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 125\n        },\n        __self: this\n      }));\n    }\n\n    if (!getToken()) {\n      return React.createElement(Redirect, {\n        to: \"/login\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 146\n        },\n        __self: this\n      });\n    }\n  }\n\n}\n\nexport default UserList;","map":{"version":3,"sources":["C:/Users/pc/Desktop/asira_core/src/components/user/userList.js"],"names":["React","Redirect","getAllUserFunction","checkPermission","getAllRoleFunction","getToken","TableComponent","columnDataUser","id","numeric","label","disablePadding","UserList","Component","constructor","props","_isMounted","refresh","param","rows","state","rowsPerPage","page","data","error","dataListUser","dataUser","length","key","status","toString","toLowerCase","role","findRole","roles","dataRole","setState","listUser","totalData","loading","errorMessage","roleUser","keyRole","trim","name","system","onChangePage","current","paging","componentDidMount","componentWillUnmount","render","padding"],"mappings":"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","sourcesContent":["import React from 'react'\r\nimport { Redirect } from 'react-router-dom'\r\nimport {getAllUserFunction} from './saga'\r\nimport { checkPermission } from '../global/globalFunction';\r\nimport { getAllRoleFunction } from '../rolePermission/saga';\r\nimport { getToken } from '../index/token'\r\nimport TableComponent from '../subComponent/TableComponent'\r\n\r\n\r\nconst columnDataUser = [\r\n    {\r\n        id: 'id',\r\n        numeric: false,\r\n        label: 'ID Akun',\r\n    },\r\n    {\r\n        id: 'username',\r\n        numeric: false,\r\n        label: 'Username',\r\n    },\r\n    {\r\n        id: 'role',\r\n        numeric: false,\r\n        label: 'Role',\r\n    },\r\n    {\r\n        id: 'bank_name',\r\n        numeric: false,\r\n        label: 'Mitra',\r\n    },\r\n    { id: 'status', numeric: false, disablePadding: true, label: 'Status' },\r\n]\r\n\r\nclass UserList extends React.Component{\r\n    _isMounted = false;\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            paging:true,\r\n            loading:true, \r\n            listUser: [],\r\n            page: 1,\r\n            rowsPerPage: 10,\r\n            totalData: 0,\r\n        }\r\n    }\r\n\r\n    componentDidMount(){\r\n        this._isMounted = true;\r\n        this.refresh()\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        this._isMounted = false;\r\n    }\r\n\r\n    refresh = async function(){\r\n        const param = {};\r\n        param.rows = this.state.rowsPerPage;\r\n        param.page = this.state.page;\r\n\r\n        const data = await getAllUserFunction(param, getAllRoleFunction);\r\n\r\n        if(data) {\r\n            if(!data.error) {\r\n                const dataListUser = data.dataUser || [];\r\n\r\n                if(dataListUser.length !== 0) {\r\n                    for(const key in dataListUser) {\r\n                        dataListUser[key].status = dataListUser[key].status && dataListUser[key].status.toString().toLowerCase() === 'active' ? 'Aktif' : 'Tidak Aktif'\r\n                        dataListUser[key].role = this.findRole(dataListUser[key].roles || [], data.dataRole || [])\r\n                    }\r\n                }\r\n\r\n                this.setState({\r\n                    listUser: dataListUser,\r\n                    totalData: data.totalData,\r\n                    loading: false,\r\n                })\r\n            } else {\r\n                this.setState({\r\n                    errorMessage: data.error,\r\n                    loading: false,\r\n                })\r\n            }      \r\n        }\r\n    }\r\n\r\n    findRole = (roleUser, dataRole) => {\r\n        let role = '';\r\n        for(const keyRole in roleUser) {\r\n            for(const key in dataRole) {\r\n                if(dataRole[key].id === roleUser[keyRole]) {\r\n                    if(role.trim().length !== 0) {\r\n                        role += ', ';\r\n                    }\r\n                    role += `${dataRole[key].name} (${dataRole[key].system})`;\r\n                }\r\n            }\r\n        }\r\n        \r\n        return role;\r\n    }\r\n\r\n    onChangePage = (current) => {\r\n        this.setState({\r\n            loading:true,\r\n            page:current,\r\n        }, () => {\r\n            if(this.state.paging) {\r\n                this.refresh()\r\n            };\r\n        })\r\n    }\r\n    \r\n\r\n\r\n    render(){\r\n\r\n        if(getToken()){\r\n            return(\r\n                <div style={{padding:0}}>\r\n\r\n                   < TableComponent\r\n                        id={\"id\"}\r\n                        title={'Akun - List'}\r\n                        paging={this.state.paging}\r\n                        loading={this.state.loading}\r\n                        columnData={columnDataUser}\r\n                        data={this.state.listUser}\r\n                        page={this.state.page}\r\n                        rowsPerPage={this.state.rowsPerPage}\r\n                        totalData={this.state.totalData}\r\n                        onChangePage={this.onChangePage}             \r\n                        permissionEdit={ checkPermission('core_user_patch') ? '/editUser/' : null}\r\n                        permissionDetail={ checkPermission('core_user_details') ? '/detailUser/' : null}\r\n                    />\r\n\r\n                  \r\n                </div>\r\n            )\r\n        }\r\n        if(!getToken()){\r\n            return (\r\n                <Redirect to='/login' />\r\n            )    \r\n        }\r\n       \r\n    }\r\n}\r\n\r\nexport default UserList;"]},"metadata":{},"sourceType":"module"}