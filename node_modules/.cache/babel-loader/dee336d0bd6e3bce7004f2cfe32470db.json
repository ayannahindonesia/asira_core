{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\pc\\\\Desktop\\\\asira_core\\\\src\\\\components\\\\layanan\\\\layananEdit.js\";\nimport React from 'react';\nimport swal from 'sweetalert';\nimport Loader from 'react-loader-spinner';\nimport { editLayananFunction, getDetailLayananFunction } from './saga';\nimport { Redirect } from 'react-router-dom';\nimport './../../support/css/layananAdd.css';\nimport { getToken } from '../index/token';\n\nclass LayananEdit extends React.Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      selectedFile: null,\n      base64img: null,\n      errorMessage: '',\n      diKlik: false,\n      rows: [],\n      imageVal: '',\n      check: true,\n      loading: true,\n      submit: false\n    };\n    this._isMounted = false;\n\n    this.getLayananEdit = async function () {\n      const id = this.props.match.params.id;\n      const data = await getDetailLayananFunction({\n        id\n      });\n\n      if (data) {\n        if (!data.error) {\n          this.setState({\n            rows: data.data,\n            imageVal: data.data.image,\n            loading: false,\n            check: data.data && data.data.status && data.data.status === 'active' ? true : false\n          });\n        } else {\n          this.setState({\n            errorMessage: data.error,\n            loading: false\n          });\n        }\n      }\n    };\n\n    this.onChangeHandler = event => {\n      //untuk mendapatkan file image\n      this.setState({\n        selectedFile: event.target.files[0]\n      });\n    };\n\n    this.valueHandler = () => {\n      return this.state.selectedFile ? this.state.selectedFile.name : \"Browse Image\";\n    };\n\n    this.btnEditLayanan = () => {\n      var name = this.refs.namaLayanan.value ? this.refs.namaLayanan.value : this.refs.namaLayanan.placeholder;\n      var description = this.refs.deskripsi.value ? this.refs.deskripsi.value : \" \";\n      var status = this.state.check ? \"active\" : \"inactive\";\n      this.setState({\n        submit: true\n      });\n\n      if (name.trim() === \"\" || name === \"\") {\n        this.setState({\n          errorMessage: \"Nama Layanan Kosong - Harap Cek Ulang\",\n          submit: false\n        });\n      } else if (description.length > 250) {\n        this.setState({\n          errorMessage: \"Deskripsi terlalu panjang, maksimal 250 karakter - Harap Cek Ulang\",\n          submit: false\n        });\n      } else {\n        if (this.state.selectedFile) {\n          if (this.state.selectedFile.size > 1000000) {\n            this.setState({\n              errorMessage: \"Gambar tidak bole lebih dari 1 MB - Harap cek ulang\",\n              submit: false\n            });\n          } else {\n            var pic = this.state.selectedFile;\n            var reader = new FileReader();\n            reader.readAsDataURL(pic);\n\n            reader.onload = () => {\n              var arr = reader.result.split(\",\");\n              var image = arr[1].toString();\n              var newData = {\n                name,\n                image,\n                status,\n                description\n              };\n              const param = {\n                id: this.props.match.params.id,\n                newData\n              };\n              this.editLayananBtn(param);\n            };\n\n            reader.onerror = function (error) {\n              this.setState({\n                errorMessage: \"Gambar gagal tersimpan\"\n              });\n            };\n          }\n        } else {\n          var newData = {\n            name,\n            status,\n            description\n          };\n          const param = {\n            id: this.props.match.params.id,\n            newData\n          };\n          this.editLayananBtn(param);\n        }\n      }\n    };\n\n    this.editLayananBtn = async function (param) {\n      const data = await editLayananFunction(param);\n\n      if (data) {\n        if (!data.error) {\n          swal(\"Success\", \"Layanan berhasil di Edit\", \"success\");\n          this.setState({\n            errorMessage: null,\n            diKlik: true\n          });\n        } else {\n          this.setState({\n            errorMessage: data.error,\n            submit: false\n          });\n        }\n      }\n    };\n\n    this.btnCancel = () => {\n      this.setState({\n        diKlik: true\n      });\n    };\n\n    this.handleChecked = () => {\n      this.setState({\n        check: !this.state.check\n      });\n    };\n\n    this.renderBtnSumbit = () => {\n      if (this.state.submit) {\n        return React.createElement(\"input\", {\n          type: \"button\",\n          disabled: true,\n          className: \"btn btn-success ml-3 mr-3\",\n          value: \"Ubah\",\n          onClick: this.btnEditLayanan,\n          style: {\n            cursor: \"wait\"\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 135\n          },\n          __self: this\n        });\n      } else {\n        return React.createElement(\"input\", {\n          type: \"button\",\n          className: \"btn btn-success ml-3 mr-3\",\n          value: \"Ubah\",\n          onClick: this.btnEditLayanan,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 137\n          },\n          __self: this\n        });\n      }\n    };\n  }\n\n  UNSAFE_componentWillReceiveProps(newProps) {\n    this.setState({\n      errorMessage: newProps.error\n    });\n  }\n\n  componentDidMount() {\n    this._isMounted = true;\n    this.getLayananEdit();\n  }\n\n  componentWillUnmount() {\n    this._isMounted = false;\n  }\n\n  getBase64(file, callback) {\n    var reader = new FileReader();\n    reader.readAsDataURL(file);\n\n    reader.onload = function () {\n      callback(reader.result.replace(\"data:image/jpeg;base64,\", \"\"));\n    };\n\n    reader.onerror = function (error) {\n      this.setState({\n        errorMessage: \"Gambar gagal tersimpan\"\n      });\n    };\n  }\n\n  render() {\n    if (this.state.loading) {\n      return React.createElement(\"div\", {\n        className: \"mt-2\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 145\n        },\n        __self: this\n      }, React.createElement(Loader, {\n        type: \"ThreeDots\",\n        color: \"#00BFFF\",\n        height: \"30\",\n        width: \"30\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 146\n        },\n        __self: this\n      }));\n    } else {\n      if (this.state.diKlik) {\n        return React.createElement(Redirect, {\n          to: \"/listlayanan\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 156\n          },\n          __self: this\n        });\n      }\n\n      if (getToken()) {\n        return React.createElement(\"div\", {\n          className: \"container\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 161\n          },\n          __self: this\n        }, React.createElement(\"h2\", {\n          className: \"mt-3\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 162\n          },\n          __self: this\n        }, \"Layanan - Ubah\"), React.createElement(\"hr\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 164\n          },\n          __self: this\n        }), React.createElement(\"div\", {\n          className: \"form-group row\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 165\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          className: \"col-12\",\n          style: {\n            color: \"red\",\n            fontSize: \"15px\",\n            textAlign: 'center'\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 166\n          },\n          __self: this\n        }, this.state.errorMessage)), React.createElement(\"div\", {\n          className: \"form-group row\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 170\n          },\n          __self: this\n        }, React.createElement(\"label\", {\n          className: \"col-sm-3 col-form-label\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 171\n          },\n          __self: this\n        }, \"Nama Layanan\"), React.createElement(\"div\", {\n          className: \"col-sm-9\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 172\n          },\n          __self: this\n        }, React.createElement(\"input\", {\n          disabled: true,\n          type: \"text\",\n          placeholder: this.state.rows.name,\n          style: {\n            width: \"50%\",\n            marginLeft: \"13%\"\n          },\n          className: \"form-control\",\n          ref: \"namaLayanan\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 173\n          },\n          __self: this\n        }))), React.createElement(\"div\", {\n          className: \"form-group row\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 176\n          },\n          __self: this\n        }, React.createElement(\"label\", {\n          className: \"col-sm-3 col-form-label\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 177\n          },\n          __self: this\n        }, \"Deskripsi Layanan\"), React.createElement(\"div\", {\n          className: \"col-sm-9\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 178\n          },\n          __self: this\n        }, React.createElement(\"textarea\", {\n          rows: \"5\",\n          ref: \"deskripsi\",\n          className: \"form-control\",\n          style: {\n            width: \"50%\",\n            marginLeft: \"13%\"\n          },\n          defaultValue: this.state.rows.description,\n          required: true,\n          autoFocus: true,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 179\n          },\n          __self: this\n        }))), React.createElement(\"div\", {\n          className: \"form-group row\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 182\n          },\n          __self: this\n        }, React.createElement(\"label\", {\n          className: \"col-sm-3 col-form-label\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 183\n          },\n          __self: this\n        }, \"Gambar\"), React.createElement(\"div\", {\n          className: \"col-sm-9\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 184\n          },\n          __self: this\n        }, React.createElement(\"input\", {\n          className: \"AddStyleButton btn btn-primary\",\n          type: \"button\",\n          onClick: () => this.refs.input.click(),\n          value: this.valueHandler(),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 185\n          },\n          __self: this\n        }), React.createElement(\"input\", {\n          ref: \"input\",\n          style: {\n            display: \"none\"\n          },\n          type: \"file\",\n          accept: \"image/*\",\n          onChange: this.onChangeHandler,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 186\n          },\n          __self: this\n        }), React.createElement(\"img\", {\n          alt: this.state.rows.name,\n          style: {\n            marginLeft: \"20px\",\n            width: \"100px\"\n          },\n          src: this.state.imageVal,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 187\n          },\n          __self: this\n        }))), React.createElement(\"div\", {\n          className: \"form-group row\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 190\n          },\n          __self: this\n        }, React.createElement(\"label\", {\n          className: \"col-sm-3 col-form-label\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 191\n          },\n          __self: this\n        }, \"Status\"), React.createElement(\"div\", {\n          className: \"col-sm-9\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 192\n          },\n          __self: this\n        }, React.createElement(\"input\", {\n          className: \"form-check-input messageCheckbox AddStyleButtonCheckbox\",\n          type: \"checkbox\",\n          onChange: this.handleChecked,\n          checked: this.state.check,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 193\n          },\n          __self: this\n        }), React.createElement(\"label\", {\n          style: {\n            position: \"relative\",\n            left: \"18%\",\n            paddingTop: \"3px\"\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 194\n          },\n          __self: this\n        }, this.state.check ? 'Aktif' : 'Tidak Aktif'))), React.createElement(\"div\", {\n          className: \"form-group row\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 197\n          },\n          __self: this\n        }, this.renderBtnSumbit(), React.createElement(\"input\", {\n          type: \"button\",\n          className: \"btn btn-warning\",\n          value: \"Batal\",\n          onClick: this.btnCancel,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 199\n          },\n          __self: this\n        })));\n      }\n\n      if (!getToken()) {\n        return React.createElement(Redirect, {\n          to: \"/login\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 208\n          },\n          __self: this\n        });\n      }\n    }\n  }\n\n}\n\nexport default LayananEdit;","map":{"version":3,"sources":["C:/Users/pc/Desktop/asira_core/src/components/layanan/layananEdit.js"],"names":["React","swal","Loader","editLayananFunction","getDetailLayananFunction","Redirect","getToken","LayananEdit","Component","state","selectedFile","base64img","errorMessage","diKlik","rows","imageVal","check","loading","submit","_isMounted","getLayananEdit","id","props","match","params","data","error","setState","image","status","onChangeHandler","event","target","files","valueHandler","name","btnEditLayanan","refs","namaLayanan","value","placeholder","description","deskripsi","trim","length","size","pic","reader","FileReader","readAsDataURL","onload","arr","result","split","toString","newData","param","editLayananBtn","onerror","btnCancel","handleChecked","renderBtnSumbit","cursor","UNSAFE_componentWillReceiveProps","newProps","componentDidMount","componentWillUnmount","getBase64","file","callback","replace","render","color","fontSize","textAlign","width","marginLeft","input","click","display","position","left","paddingTop"],"mappings":";AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,IAAP,MAAiB,YAAjB;AACA,OAAOC,MAAP,MAAmB,sBAAnB;AACA,SAASC,mBAAT,EAA8BC,wBAA9B,QAA8D,QAA9D;AACA,SAASC,QAAT,QAAyB,kBAAzB;AACA,OAAO,oCAAP;AACA,SAASC,QAAT,QAAyB,gBAAzB;;AAIA,MAAMC,WAAN,SAA0BP,KAAK,CAACQ,SAAhC,CAAyC;AAAA;AAAA;AAAA,SACrCC,KADqC,GAC/B;AACFC,MAAAA,YAAY,EAAC,IADX;AAEFC,MAAAA,SAAS,EAAC,IAFR;AAGFC,MAAAA,YAAY,EAAC,EAHX;AAIFC,MAAAA,MAAM,EAAC,KAJL;AAKFC,MAAAA,IAAI,EAAC,EALH;AAMFC,MAAAA,QAAQ,EAAC,EANP;AAOFC,MAAAA,KAAK,EAAE,IAPL;AAQFC,MAAAA,OAAO,EAAC,IARN;AASFC,MAAAA,MAAM,EAAC;AATL,KAD+B;AAAA,SAYrCC,UAZqC,GAYxB,KAZwB;;AAAA,SAyBrCC,cAzBqC,GAyBpB,kBAAgB;AAC7B,YAAMC,EAAE,GAAG,KAAKC,KAAL,CAAWC,KAAX,CAAiBC,MAAjB,CAAwBH,EAAnC;AACA,YAAMI,IAAI,GAAG,MAAMrB,wBAAwB,CAAC;AAACiB,QAAAA;AAAD,OAAD,CAA3C;;AAEA,UAAGI,IAAH,EAAQ;AACJ,YAAG,CAACA,IAAI,CAACC,KAAT,EAAe;AACX,eAAKC,QAAL,CAAc;AAACb,YAAAA,IAAI,EAACW,IAAI,CAACA,IAAX;AAAgBV,YAAAA,QAAQ,EAACU,IAAI,CAACA,IAAL,CAAUG,KAAnC;AAAyCX,YAAAA,OAAO,EAAC,KAAjD;AAAwDD,YAAAA,KAAK,EAAES,IAAI,CAACA,IAAL,IAAaA,IAAI,CAACA,IAAL,CAAUI,MAAvB,IAAiCJ,IAAI,CAACA,IAAL,CAAUI,MAAV,KAAoB,QAArD,GAAgE,IAAhE,GAAuE;AAAtI,WAAd;AACH,SAFD,MAEK;AACD,eAAKF,QAAL,CAAc;AAACf,YAAAA,YAAY,EAACa,IAAI,CAACC,KAAnB;AAAyBT,YAAAA,OAAO,EAAC;AAAjC,WAAd;AACH;AACJ;AACJ,KApCoC;;AAAA,SAsCrCa,eAtCqC,GAsClBC,KAAD,IAAS;AACvB;AACA,WAAKJ,QAAL,CAAc;AAACjB,QAAAA,YAAY,EAACqB,KAAK,CAACC,MAAN,CAAaC,KAAb,CAAmB,CAAnB;AAAd,OAAd;AACH,KAzCoC;;AAAA,SA0CrCC,YA1CqC,GA0CtB,MAAI;AACf,aAAQ,KAAKzB,KAAL,CAAWC,YAAX,GAA0B,KAAKD,KAAL,CAAWC,YAAX,CAAwByB,IAAlD,GAAwD,cAAhE;AAEH,KA7CoC;;AAAA,SA0DrCC,cA1DqC,GA0DpB,MAAI;AAEjB,UAAID,IAAI,GAAG,KAAKE,IAAL,CAAUC,WAAV,CAAsBC,KAAtB,GAA8B,KAAKF,IAAL,CAAUC,WAAV,CAAsBC,KAApD,GAA4D,KAAKF,IAAL,CAAUC,WAAV,CAAsBE,WAA7F;AACA,UAAIC,WAAW,GAAG,KAAKJ,IAAL,CAAUK,SAAV,CAAoBH,KAApB,GAA4B,KAAKF,IAAL,CAAUK,SAAV,CAAoBH,KAAhD,GAAuD,GAAzE;AACA,UAAIV,MAAM,GAAG,KAAKpB,KAAL,CAAWO,KAAX,GAAmB,QAAnB,GAA6B,UAA1C;AACA,WAAKW,QAAL,CAAc;AAACT,QAAAA,MAAM,EAAC;AAAR,OAAd;;AACA,UAAGiB,IAAI,CAACQ,IAAL,OAAc,EAAd,IAAkBR,IAAI,KAAG,EAA5B,EAA+B;AAC3B,aAAKR,QAAL,CAAc;AAACf,UAAAA,YAAY,EAAC,uCAAd;AAAsDM,UAAAA,MAAM,EAAC;AAA7D,SAAd;AACH,OAFD,MAEM,IAAGuB,WAAW,CAACG,MAAZ,GAAoB,GAAvB,EAA2B;AAC7B,aAAKjB,QAAL,CAAc;AAACf,UAAAA,YAAY,EAAC,oEAAd;AAAmFM,UAAAA,MAAM,EAAC;AAA1F,SAAd;AACH,OAFK,MAGF;AACA,YAAI,KAAKT,KAAL,CAAWC,YAAf,EAA4B;AACxB,cAAI,KAAKD,KAAL,CAAWC,YAAX,CAAwBmC,IAAxB,GAA8B,OAAlC,EAA0C;AACtC,iBAAKlB,QAAL,CAAc;AAACf,cAAAA,YAAY,EAAC,qDAAd;AAAoEM,cAAAA,MAAM,EAAC;AAA3E,aAAd;AACH,WAFD,MAEK;AACD,gBAAI4B,GAAG,GAAG,KAAKrC,KAAL,CAAWC,YAArB;AACA,gBAAIqC,MAAM,GAAG,IAAIC,UAAJ,EAAb;AACAD,YAAAA,MAAM,CAACE,aAAP,CAAqBH,GAArB;;AACAC,YAAAA,MAAM,CAACG,MAAP,GAAiB,MAAM;AACnB,kBAAIC,GAAG,GAAGJ,MAAM,CAACK,MAAP,CAAcC,KAAd,CAAoB,GAApB,CAAV;AACA,kBAAIzB,KAAK,GAAGuB,GAAG,CAAC,CAAD,CAAH,CAAOG,QAAP,EAAZ;AACA,kBAAIC,OAAO,GAAG;AAACpB,gBAAAA,IAAD;AAAMP,gBAAAA,KAAN;AAAYC,gBAAAA,MAAZ;AAAmBY,gBAAAA;AAAnB,eAAd;AACA,oBAAMe,KAAK,GAAE;AACTnC,gBAAAA,EAAE,EAAC,KAAKC,KAAL,CAAWC,KAAX,CAAiBC,MAAjB,CAAwBH,EADlB;AAETkC,gBAAAA;AAFS,eAAb;AAIA,mBAAKE,cAAL,CAAoBD,KAApB;AACH,aATD;;AAUAT,YAAAA,MAAM,CAACW,OAAP,GAAiB,UAAUhC,KAAV,EAAiB;AAC9B,mBAAKC,QAAL,CAAc;AAACf,gBAAAA,YAAY,EAAC;AAAd,eAAd;AAEH,aAHD;AAIH;AAEJ,SAvBD,MAuBK;AACD,cAAI2C,OAAO,GAAG;AAACpB,YAAAA,IAAD;AAAMN,YAAAA,MAAN;AAAaY,YAAAA;AAAb,WAAd;AACA,gBAAMe,KAAK,GAAE;AACTnC,YAAAA,EAAE,EAAC,KAAKC,KAAL,CAAWC,KAAX,CAAiBC,MAAjB,CAAwBH,EADlB;AAETkC,YAAAA;AAFS,WAAb;AAIA,eAAKE,cAAL,CAAoBD,KAApB;AACH;AACJ;AACJ,KAtGoC;;AAAA,SAuGrCC,cAvGqC,GAuGpB,gBAAgBD,KAAhB,EAAsB;AACnC,YAAM/B,IAAI,GAAG,MAAMtB,mBAAmB,CAAEqD,KAAF,CAAtC;;AACA,UAAG/B,IAAH,EAAQ;AACJ,YAAG,CAACA,IAAI,CAACC,KAAT,EAAe;AACXzB,UAAAA,IAAI,CAAC,SAAD,EAAW,0BAAX,EAAsC,SAAtC,CAAJ;AACA,eAAK0B,QAAL,CAAc;AAACf,YAAAA,YAAY,EAAC,IAAd;AAAmBC,YAAAA,MAAM,EAAC;AAA1B,WAAd;AACH,SAHD,MAGK;AACD,eAAKc,QAAL,CAAc;AAACf,YAAAA,YAAY,EAACa,IAAI,CAACC,KAAnB;AAAyBR,YAAAA,MAAM,EAAC;AAAhC,WAAd;AACH;AACJ;AACJ,KAjHoC;;AAAA,SAkHrCyC,SAlHqC,GAkHzB,MAAI;AACZ,WAAKhC,QAAL,CAAc;AAACd,QAAAA,MAAM,EAAC;AAAR,OAAd;AACH,KApHoC;;AAAA,SAsHrC+C,aAtHqC,GAsHrB,MAAM;AAClB,WAAKjC,QAAL,CAAc;AAACX,QAAAA,KAAK,EAAG,CAAC,KAAKP,KAAL,CAAWO;AAArB,OAAd;AACH,KAxHoC;;AAAA,SA0HrC6C,eA1HqC,GA0HpB,MAAI;AACjB,UAAI,KAAKpD,KAAL,CAAWS,MAAf,EAAuB;AACnB,eAAO;AAAO,UAAA,IAAI,EAAC,QAAZ;AAAqB,UAAA,QAAQ,MAA7B;AAA8B,UAAA,SAAS,EAAC,2BAAxC;AAAoE,UAAA,KAAK,EAAC,MAA1E;AAAiF,UAAA,OAAO,EAAE,KAAKkB,cAA/F;AAA+G,UAAA,KAAK,EAAE;AAAC0B,YAAAA,MAAM,EAAC;AAAR,WAAtH;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UAAP;AACH,OAFD,MAEK;AACD,eAAS;AAAO,UAAA,IAAI,EAAC,QAAZ;AAAqB,UAAA,SAAS,EAAC,2BAA/B;AAA2D,UAAA,KAAK,EAAC,MAAjE;AAAwE,UAAA,OAAO,EAAE,KAAK1B,cAAtF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UAAT;AAEH;AACH,KAjImC;AAAA;;AAcrC2B,EAAAA,gCAAgC,CAACC,QAAD,EAAU;AACtC,SAAKrC,QAAL,CAAc;AAACf,MAAAA,YAAY,EAACoD,QAAQ,CAACtC;AAAvB,KAAd;AACH;;AACDuC,EAAAA,iBAAiB,GAAE;AACf,SAAK9C,UAAL,GAAgB,IAAhB;AACA,SAAKC,cAAL;AACH;;AACD8C,EAAAA,oBAAoB,GAAE;AAClB,SAAK/C,UAAL,GAAgB,KAAhB;AACH;;AAuBDgD,EAAAA,SAAS,CAACC,IAAD,EAAMC,QAAN,EAAgB;AACrB,QAAItB,MAAM,GAAG,IAAIC,UAAJ,EAAb;AACAD,IAAAA,MAAM,CAACE,aAAP,CAAqBmB,IAArB;;AACArB,IAAAA,MAAM,CAACG,MAAP,GAAgB,YAAY;AACxBmB,MAAAA,QAAQ,CAACtB,MAAM,CAACK,MAAP,CAAckB,OAAd,CAAsB,yBAAtB,EAAgD,EAAhD,CAAD,CAAR;AACH,KAFD;;AAGAvB,IAAAA,MAAM,CAACW,OAAP,GAAiB,UAAUhC,KAAV,EAAiB;AAChC,WAAKC,QAAL,CAAc;AAACf,QAAAA,YAAY,EAAC;AAAd,OAAd;AAED,KAHD;AAIF;;AA2EF2D,EAAAA,MAAM,GAAE;AACJ,QAAI,KAAK9D,KAAL,CAAWQ,OAAf,EAAuB;AACnB,aACI;AAAK,QAAA,SAAS,EAAC,MAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACC,oBAAC,MAAD;AACG,QAAA,IAAI,EAAC,WADR;AAEG,QAAA,KAAK,EAAC,SAFT;AAGG,QAAA,MAAM,EAAC,IAHV;AAIG,QAAA,KAAK,EAAC,IAJT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADD,CADJ;AAUH,KAXD,MAWK;AACL,UAAG,KAAKR,KAAL,CAAWI,MAAd,EAAqB;AACjB,eAAO,oBAAC,QAAD;AAAU,UAAA,EAAE,EAAC,cAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UAAP;AAEH;;AACD,UAAGP,QAAQ,EAAX,EAAc;AACV,eACI;AAAK,UAAA,SAAS,EAAC,WAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WACG;AAAI,UAAA,SAAS,EAAC,MAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,4BADH,EAGG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UAHH,EAIG;AAAK,UAAA,SAAS,EAAC,gBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WACS;AAAK,UAAA,SAAS,EAAC,QAAf;AAAwB,UAAA,KAAK,EAAE;AAACkE,YAAAA,KAAK,EAAC,KAAP;AAAaC,YAAAA,QAAQ,EAAC,MAAtB;AAA6BC,YAAAA,SAAS,EAAC;AAAvC,WAA/B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WACS,KAAKjE,KAAL,CAAWG,YADpB,CADT,CAJH,EASG;AAAK,UAAA,SAAS,EAAC,gBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WACS;AAAO,UAAA,SAAS,EAAC,yBAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,0BADT,EAES;AAAK,UAAA,SAAS,EAAC,UAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WACA;AAAO,UAAA,QAAQ,MAAf;AAAgB,UAAA,IAAI,EAAC,MAArB;AAA4B,UAAA,WAAW,EAAE,KAAKH,KAAL,CAAWK,IAAX,CAAgBqB,IAAzD;AAA+D,UAAA,KAAK,EAAE;AAACwC,YAAAA,KAAK,EAAC,KAAP;AAAaC,YAAAA,UAAU,EAAC;AAAxB,WAAtE;AAAsG,UAAA,SAAS,EAAC,cAAhH;AAA+H,UAAA,GAAG,EAAC,aAAnI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UADA,CAFT,CATH,EAeI;AAAK,UAAA,SAAS,EAAC,gBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WACQ;AAAO,UAAA,SAAS,EAAC,yBAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,+BADR,EAEQ;AAAK,UAAA,SAAS,EAAC,UAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WACA;AAAU,UAAA,IAAI,EAAC,GAAf;AAAmB,UAAA,GAAG,EAAC,WAAvB;AAAmC,UAAA,SAAS,EAAC,cAA7C;AAA6D,UAAA,KAAK,EAAE;AAACD,YAAAA,KAAK,EAAC,KAAP;AAAaC,YAAAA,UAAU,EAAC;AAAxB,WAApE;AAAoG,UAAA,YAAY,EAAE,KAAKnE,KAAL,CAAWK,IAAX,CAAgB2B,WAAlI;AAA+I,UAAA,QAAQ,MAAvJ;AAAwJ,UAAA,SAAS,MAAjK;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UADA,CAFR,CAfJ,EAqBI;AAAK,UAAA,SAAS,EAAC,gBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WACQ;AAAO,UAAA,SAAS,EAAC,yBAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBADR,EAEQ;AAAK,UAAA,SAAS,EAAC,UAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WACA;AAAO,UAAA,SAAS,EAAC,gCAAjB;AAAkD,UAAA,IAAI,EAAC,QAAvD;AAAgE,UAAA,OAAO,EAAE,MAAI,KAAKJ,IAAL,CAAUwC,KAAV,CAAgBC,KAAhB,EAA7E;AAAsG,UAAA,KAAK,EAAE,KAAK5C,YAAL,EAA7G;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UADA,EAEA;AAAO,UAAA,GAAG,EAAC,OAAX;AAAmB,UAAA,KAAK,EAAE;AAAC6C,YAAAA,OAAO,EAAC;AAAT,WAA1B;AAA4C,UAAA,IAAI,EAAC,MAAjD;AAAwD,UAAA,MAAM,EAAC,SAA/D;AAAyE,UAAA,QAAQ,EAAE,KAAKjD,eAAxF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UAFA,EAGA;AAAK,UAAA,GAAG,EAAE,KAAKrB,KAAL,CAAWK,IAAX,CAAgBqB,IAA1B;AAAgC,UAAA,KAAK,EAAE;AAACyC,YAAAA,UAAU,EAAC,MAAZ;AAAmBD,YAAAA,KAAK,EAAC;AAAzB,WAAvC;AAA0E,UAAA,GAAG,EAAE,KAAKlE,KAAL,CAAWM,QAA1F;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UAHA,CAFR,CArBJ,EA6BI;AAAK,UAAA,SAAS,EAAC,gBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WACQ;AAAO,UAAA,SAAS,EAAC,yBAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBADR,EAEQ;AAAK,UAAA,SAAS,EAAC,UAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WACA;AAAO,UAAA,SAAS,EAAC,yDAAjB;AAA2E,UAAA,IAAI,EAAC,UAAhF;AAA2F,UAAA,QAAQ,EAAE,KAAK6C,aAA1G;AAAyH,UAAA,OAAO,EAAE,KAAKnD,KAAL,CAAWO,KAA7I;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UADA,EAEA;AAAO,UAAA,KAAK,EAAE;AAACgE,YAAAA,QAAQ,EAAC,UAAV;AAAqBC,YAAAA,IAAI,EAAC,KAA1B;AAAgCC,YAAAA,UAAU,EAAC;AAA3C,WAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WAAkE,KAAKzE,KAAL,CAAWO,KAAX,GAAmB,OAAnB,GAA6B,aAA/F,CAFA,CAFR,CA7BJ,EAoCI;AAAK,UAAA,SAAS,EAAC,gBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WACS,KAAK6C,eAAL,EADT,EAEQ;AAAO,UAAA,IAAI,EAAC,QAAZ;AAAqB,UAAA,SAAS,EAAC,iBAA/B;AAAiD,UAAA,KAAK,EAAC,OAAvD;AAA+D,UAAA,OAAO,EAAE,KAAKF,SAA7E;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UAFR,CApCJ,CADJ;AA4CH;;AACD,UAAG,CAACrD,QAAQ,EAAZ,EAAe;AAEX,eACI,oBAAC,QAAD;AAAU,UAAA,EAAE,EAAC,QAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UADJ;AAGH;AAEJ;AAAC;;AAzMmC;;AA4MzC,eAAeC,WAAf","sourcesContent":["import React from 'react'\r\nimport swal from 'sweetalert'\r\nimport Loader from 'react-loader-spinner'\r\nimport { editLayananFunction, getDetailLayananFunction } from './saga'\r\nimport { Redirect } from 'react-router-dom'\r\nimport './../../support/css/layananAdd.css'\r\nimport { getToken } from '../index/token';\r\n\r\n\r\n\r\nclass LayananEdit extends React.Component{\r\n    state={\r\n        selectedFile:null,\r\n        base64img:null,\r\n        errorMessage:'',\r\n        diKlik:false,\r\n        rows:[],\r\n        imageVal:'',\r\n        check: true,\r\n        loading:true,\r\n        submit:false\r\n    }\r\n    _isMounted = false;\r\n\r\n    UNSAFE_componentWillReceiveProps(newProps){\r\n        this.setState({errorMessage:newProps.error})\r\n    }\r\n    componentDidMount(){\r\n        this._isMounted=true\r\n        this.getLayananEdit()\r\n    }\r\n    componentWillUnmount(){\r\n        this._isMounted=false\r\n    }\r\n\r\n    getLayananEdit = async function(){\r\n        const id = this.props.match.params.id\r\n        const data = await getDetailLayananFunction({id})\r\n\r\n        if(data){\r\n            if(!data.error){\r\n                this.setState({rows:data.data,imageVal:data.data.image,loading:false, check: data.data && data.data.status && data.data.status ==='active' ? true : false})\r\n            }else{\r\n                this.setState({errorMessage:data.error,loading:false})\r\n            }\r\n        }\r\n    }\r\n\r\n    onChangeHandler = (event)=>{\r\n        //untuk mendapatkan file image\r\n        this.setState({selectedFile:event.target.files[0]})\r\n    }\r\n    valueHandler = ()=>{\r\n        return  this.state.selectedFile ? this.state.selectedFile.name :\"Browse Image\"\r\n        \r\n    }\r\n    getBase64(file,callback) {\r\n        var reader = new FileReader();\r\n        reader.readAsDataURL(file);\r\n        reader.onload = function () {\r\n            callback(reader.result.replace(\"data:image/jpeg;base64,\",\"\"))\r\n        };\r\n        reader.onerror = function (error) {\r\n          this.setState({errorMessage:\"Gambar gagal tersimpan\"})\r\n\r\n        };\r\n     }\r\n\r\n    btnEditLayanan = ()=>{\r\n        \r\n        var name = this.refs.namaLayanan.value ? this.refs.namaLayanan.value : this.refs.namaLayanan.placeholder\r\n        var description = this.refs.deskripsi.value ? this.refs.deskripsi.value :\" \"\r\n        var status = this.state.check ? \"active\": \"inactive\"\r\n        this.setState({submit:true})\r\n        if(name.trim()===\"\"||name===\"\"){\r\n            this.setState({errorMessage:\"Nama Layanan Kosong - Harap Cek Ulang\",submit:false})\r\n        }else if(description.length >250){\r\n            this.setState({errorMessage:\"Deskripsi terlalu panjang, maksimal 250 karakter - Harap Cek Ulang\",submit:false})\r\n        }\r\n        else{\r\n            if (this.state.selectedFile){\r\n                if (this.state.selectedFile.size >1000000){\r\n                    this.setState({errorMessage:\"Gambar tidak bole lebih dari 1 MB - Harap cek ulang\",submit:false})\r\n                }else{\r\n                    var pic = this.state.selectedFile\r\n                    var reader = new FileReader();\r\n                    reader.readAsDataURL(pic);\r\n                    reader.onload =  () => {           \r\n                        var arr = reader.result.split(\",\")   \r\n                        var image = arr[1].toString()\r\n                        var newData = {name,image,status,description}\r\n                        const param ={\r\n                            id:this.props.match.params.id,\r\n                            newData\r\n                        }\r\n                        this.editLayananBtn(param)\r\n                    };\r\n                    reader.onerror = function (error) {\r\n                        this.setState({errorMessage:\"Gambar gagal tersimpan\"})\r\n\r\n                    };\r\n                }\r\n             \r\n            }else{\r\n                var newData = {name,status,description}\r\n                const param ={\r\n                    id:this.props.match.params.id,\r\n                    newData\r\n                }\r\n                this.editLayananBtn(param)\r\n            }\r\n        }\r\n    }\r\n    editLayananBtn = async function (param){\r\n        const data = await editLayananFunction (param)\r\n        if(data){\r\n            if(!data.error){\r\n                swal(\"Success\",\"Layanan berhasil di Edit\",\"success\")\r\n                this.setState({errorMessage:null,diKlik:true})\r\n            }else{\r\n                this.setState({errorMessage:data.error,submit:false})\r\n            }\r\n        }\r\n    }\r\n    btnCancel = ()=>{\r\n        this.setState({diKlik:true})\r\n    }\r\n\r\n    handleChecked = () => {\r\n        this.setState({check : !this.state.check})\r\n    }\r\n\r\n    renderBtnSumbit =()=>{\r\n        if( this.state.submit) {\r\n            return <input type=\"button\" disabled className=\"btn btn-success ml-3 mr-3\" value=\"Ubah\" onClick={this.btnEditLayanan} style={{cursor:\"wait\"}}/>\r\n        }else{\r\n            return   <input type=\"button\" className=\"btn btn-success ml-3 mr-3\" value=\"Ubah\" onClick={this.btnEditLayanan}/>\r\n     \r\n        }\r\n     }\r\n\r\n    render(){\r\n        if (this.state.loading){\r\n            return (\r\n                <div className=\"mt-2\">\r\n                 <Loader \r\n                    type=\"ThreeDots\"\r\n                    color=\"#00BFFF\"\r\n                    height=\"30\"\t\r\n                    width=\"30\"\r\n                />  \r\n                </div>\r\n            )\r\n        }else{\r\n        if(this.state.diKlik){\r\n            return <Redirect to='/listlayanan'/>            \r\n\r\n        }\r\n        if(getToken()){\r\n            return(\r\n                <div className=\"container\">\r\n                   <h2 className=\"mt-3\">Layanan - Ubah</h2>\r\n                  \r\n                   <hr/>\r\n                   <div className=\"form-group row\">\r\n                            <div className=\"col-12\" style={{color:\"red\",fontSize:\"15px\",textAlign:'center'}}>\r\n                                    {this.state.errorMessage}\r\n                            </div>   \r\n                    </div>\r\n                   <div className=\"form-group row\">\r\n                            <label className=\"col-sm-3 col-form-label\">Nama Layanan</label>\r\n                            <div className=\"col-sm-9\">\r\n                            <input disabled type=\"text\" placeholder={this.state.rows.name} style={{width:\"50%\",marginLeft:\"13%\"}} className=\"form-control\" ref=\"namaLayanan\"></input>                            \r\n                            </div>\r\n                    </div>\r\n                    <div className=\"form-group row\">\r\n                            <label className=\"col-sm-3 col-form-label\">Deskripsi Layanan</label>\r\n                            <div className=\"col-sm-9\">\r\n                            <textarea rows=\"5\" ref=\"deskripsi\" className=\"form-control\"  style={{width:\"50%\",marginLeft:\"13%\"}} defaultValue={this.state.rows.description} required autoFocus/>\r\n                            </div>\r\n                    </div>\r\n                    <div className=\"form-group row\">\r\n                            <label className=\"col-sm-3 col-form-label\">Gambar</label>\r\n                            <div className=\"col-sm-9\">\r\n                            <input className=\"AddStyleButton btn btn-primary\" type=\"button\" onClick={()=>this.refs.input.click()} value={this.valueHandler()}></input>\r\n                            <input ref=\"input\" style={{display:\"none\"}} type=\"file\" accept=\"image/*\" onChange={this.onChangeHandler}></input>\r\n                            <img alt={this.state.rows.name} style={{marginLeft:\"20px\",width:\"100px\"}} src={this.state.imageVal}></img>\r\n                            </div>\r\n                    </div>\r\n                    <div className=\"form-group row\">\r\n                            <label className=\"col-sm-3 col-form-label\">Status</label>\r\n                            <div className=\"col-sm-9\">\r\n                            <input className=\"form-check-input messageCheckbox AddStyleButtonCheckbox\" type=\"checkbox\" onChange={this.handleChecked} checked={this.state.check} /> \r\n                            <label style={{position:\"relative\",left:\"18%\",paddingTop:\"3px\"}}>{this.state.check ? 'Aktif' : 'Tidak Aktif'}</label>           \r\n                            </div>\r\n                    </div>\r\n                    <div className=\"form-group row\">\r\n                            {this.renderBtnSumbit()}\r\n                            <input type=\"button\" className=\"btn btn-warning\" value=\"Batal\" onClick={this.btnCancel}/>\r\n\r\n                    </div>\r\n                </div>\r\n            )\r\n        }\r\n        if(!getToken()){\r\n       \r\n            return (\r\n                <Redirect to='/login' />\r\n            )    \r\n        }\r\n       \r\n    }}\r\n}\r\n\r\nexport default LayananEdit;"]},"metadata":{},"sourceType":"module"}