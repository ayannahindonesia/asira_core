{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\pc\\\\Desktop\\\\asira_core\\\\src\\\\components\\\\agent\\\\agentList.js\";\nimport React from 'react';\nimport { Redirect } from 'react-router-dom';\nimport { getAllAgentFunction } from './saga';\nimport { checkPermission } from '../global/globalFunction';\nimport { getToken } from '../index/token';\nimport TableComponent from '../subComponent/TableComponent';\nimport { destructAgent } from './function';\nimport SearchBar from '../subComponent/SearchBar';\nconst columnDataAgent = [{\n  id: 'id',\n  numeric: false,\n  label: 'Id Agen'\n}, {\n  id: 'name',\n  numeric: false,\n  label: 'Nama Agen'\n}, {\n  id: 'category_name',\n  numeric: false,\n  label: 'Kategori'\n}, {\n  id: 'instansi',\n  numeric: false,\n  label: 'Instansi'\n}, {\n  id: 'status',\n  numeric: false,\n  label: 'Status'\n}];\n\nclass AgentList extends React.Component {\n  constructor(props) {\n    super(props);\n    this._isMounted = false;\n\n    this.changeSearch = e => {\n      this.setState({\n        loading: true,\n        page: 1,\n        search: e.target.value\n      }, () => {\n        this.refresh();\n      });\n    };\n\n    this.refresh = async function () {\n      const param = {};\n\n      if (this.state.paging) {\n        param.rows = this.state.rowsPerPage;\n        param.page = this.state.page;\n      }\n\n      param.search_all = this.state.search;\n      const data = await getAllAgentFunction(param);\n\n      if (data) {\n        if (!data.error) {\n          const dataListAgent = destructAgent(data.dataAgent, true);\n          this.setState({\n            listAgent: dataListAgent,\n            totalData: data.totalData,\n            loading: false\n          });\n        } else {\n          this.setState({\n            errorMessage: data.error,\n            loading: false\n          });\n        }\n      }\n    };\n\n    this.onChangePage = current => {\n      this.setState({\n        loading: this.state.paging,\n        page: current\n      }, () => {\n        if (this.state.paging) {\n          this.refresh();\n        }\n\n        ;\n      });\n    };\n\n    this.state = {\n      loading: true,\n      listAgent: [],\n      paging: true,\n      page: 1,\n      rowsPerPage: 10,\n      search: ''\n    };\n  }\n\n  componentDidMount() {\n    this._isMounted = true;\n    this.refresh();\n  }\n\n  componentWillUnmount() {\n    this._isMounted = false;\n  } // onBtnSearch = () => {\n  //     this.setState({page:1}, () => {\n  //         this.refresh()\n  //     })\n  // }\n\n\n  render() {\n    if (getToken()) {\n      return React.createElement(\"div\", {\n        className: \"container\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 124\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"row\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 125\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"col-7\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 126\n        },\n        __self: this\n      }, React.createElement(\"h2\", {\n        className: \"mt-3\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 127\n        },\n        __self: this\n      }, \"Agen - List\")), React.createElement(\"div\", {\n        className: \"col-8\",\n        style: {\n          color: \"red\",\n          fontSize: \"15px\",\n          textAlign: 'left'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 129\n        },\n        __self: this\n      }, this.state.errorMessage), React.createElement(\"div\", {\n        className: \"col-4\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 132\n        },\n        __self: this\n      }, React.createElement(SearchBar, {\n        onChange: this.changeSearch,\n        placeholder: \"Search ID Agen, Nama Agen..\",\n        value: this.state.search,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 133\n        },\n        __self: this\n      }))), React.createElement(\"hr\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 141\n        },\n        __self: this\n      }), React.createElement(TableComponent, {\n        id: \"id\",\n        paging: this.state.paging,\n        loading: this.state.loading,\n        columnData: columnDataAgent,\n        data: this.state.listAgent,\n        page: this.state.page,\n        rowsPerPage: this.state.rowsPerPage,\n        totalData: this.state.totalData,\n        onChangePage: this.onChangePage,\n        permissionEdit: checkPermission('core_agent_patch') ? '/editAgent/' : null,\n        permissionDetail: checkPermission('core_agent_details') ? '/detailAgent/' : null,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 143\n        },\n        __self: this\n      }));\n    }\n\n    if (!getToken()) {\n      return React.createElement(Redirect, {\n        to: \"/login\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 162\n        },\n        __self: this\n      });\n    }\n  }\n\n}\n\nexport default AgentList;","map":{"version":3,"sources":["C:/Users/pc/Desktop/asira_core/src/components/agent/agentList.js"],"names":["React","Redirect","getAllAgentFunction","checkPermission","getToken","TableComponent","destructAgent","SearchBar","columnDataAgent","id","numeric","label","AgentList","Component","constructor","props","_isMounted","changeSearch","e","setState","loading","page","search","target","value","refresh","param","state","paging","rows","rowsPerPage","search_all","data","error","dataListAgent","dataAgent","listAgent","totalData","errorMessage","onChangePage","current","componentDidMount","componentWillUnmount","render","color","fontSize","textAlign"],"mappings":"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","sourcesContent":["import React from 'react'\r\nimport { Redirect } from 'react-router-dom'\r\nimport {getAllAgentFunction} from './saga'\r\nimport { checkPermission } from '../global/globalFunction';\r\nimport { getToken } from '../index/token'\r\nimport TableComponent from '../subComponent/TableComponent'\r\nimport { destructAgent } from './function';\r\nimport SearchBar from '../subComponent/SearchBar';\r\n\r\n\r\nconst columnDataAgent = [\r\n    {\r\n        id: 'id',\r\n        numeric: false,\r\n        label: 'Id Agen',\r\n    },\r\n    {\r\n        id: 'name',\r\n        numeric: false,\r\n        label: 'Nama Agen',\r\n    },\r\n    {\r\n        id: 'category_name',\r\n        numeric: false,\r\n        label: 'Kategori',\r\n    },\r\n    {\r\n        id: 'instansi',\r\n        numeric: false,\r\n        label: 'Instansi',\r\n    },\r\n    { \r\n        id: 'status', \r\n        numeric: false, \r\n        label: 'Status' \r\n    },\r\n]\r\n\r\nclass AgentList extends React.Component{\r\n    _isMounted = false;\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            loading:true, \r\n            listAgent: [],\r\n            paging: true,\r\n            page: 1,\r\n            rowsPerPage: 10,\r\n            search: '',\r\n        }\r\n    }\r\n\r\n    componentDidMount(){\r\n        this._isMounted = true;\r\n        this.refresh()\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        this._isMounted = false;\r\n    }\r\n\r\n    // onBtnSearch = () => {\r\n    //     this.setState({page:1}, () => {\r\n    //         this.refresh()\r\n    //     })\r\n    // }\r\n\r\n    changeSearch = (e) => {\r\n        this.setState({\r\n            loading:true,\r\n            page: 1,\r\n            search: e.target.value,\r\n        }, () => {\r\n            this.refresh();\r\n        })\r\n    }\r\n\r\n    refresh = async function(){\r\n        const param = {};\r\n\r\n        if(this.state.paging) {\r\n            param.rows = this.state.rowsPerPage;\r\n            param.page = this.state.page;\r\n        }\r\n\r\n        param.search_all = this.state.search\r\n\r\n        const data = await getAllAgentFunction(param);\r\n\r\n        if(data) {\r\n            if(!data.error) {\r\n                const dataListAgent = destructAgent(data.dataAgent, true);\r\n                \r\n                this.setState({\r\n                    listAgent: dataListAgent,\r\n                    totalData: data.totalData,\r\n                    loading: false,\r\n                })\r\n            } else {\r\n                this.setState({\r\n                    errorMessage: data.error,\r\n                    loading: false,\r\n                })\r\n            }      \r\n        }\r\n    }\r\n\r\n    onChangePage = (current) => {\r\n        this.setState({\r\n            loading:this.state.paging,\r\n            page:current,\r\n        }, () => {\r\n            if(this.state.paging) {\r\n                this.refresh()\r\n            };\r\n        })\r\n    }\r\n\r\n    render(){\r\n\r\n        if(getToken()){\r\n            return(\r\n                <div className=\"container\">\r\n                    <div className=\"row\">\r\n                        <div className=\"col-7\">\r\n                            <h2 className=\"mt-3\">Agen - List</h2>\r\n                        </div>\r\n                        <div className=\"col-8\" style={{color:\"red\",fontSize:\"15px\",textAlign:'left'}}>\r\n                            {this.state.errorMessage}\r\n                        </div>   \r\n                        <div className=\"col-4\">\r\n                            <SearchBar\r\n                                onChange={this.changeSearch}\r\n                                placeholder=\"Search ID Agen, Nama Agen..\"\r\n                                value={this.state.search}\r\n                            />\r\n                        </div> \r\n                    </div>\r\n\r\n                    <hr/>\r\n\r\n                    < TableComponent\r\n                        id={\"id\"}\r\n                        paging={this.state.paging}\r\n                        loading={this.state.loading}\r\n                        columnData={columnDataAgent}\r\n                        data={this.state.listAgent}\r\n                        page={this.state.page}\r\n                        rowsPerPage={this.state.rowsPerPage}\r\n                        totalData={this.state.totalData}\r\n                        onChangePage={this.onChangePage}             \r\n                        permissionEdit={ checkPermission('core_agent_patch') ? '/editAgent/' : null}\r\n                        permissionDetail={ checkPermission('core_agent_details') ? '/detailAgent/' : null}\r\n                    />\r\n\r\n                </div>\r\n            )\r\n        }\r\n        if(!getToken()){\r\n            return (\r\n                <Redirect to='/login' />\r\n            )    \r\n        }\r\n       \r\n    }\r\n}\r\n\r\nexport default AgentList;"]},"metadata":{},"sourceType":"module"}