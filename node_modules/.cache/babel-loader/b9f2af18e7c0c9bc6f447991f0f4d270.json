{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\pc\\\\Desktop\\\\asira_core\\\\src\\\\components\\\\pinjaman\\\\pinjamanList.js\";\nimport React from 'react';\nimport { connect } from 'react-redux';\nimport { Redirect } from 'react-router-dom';\nimport Moment from 'react-moment';\nimport './../../support/css/pagination.css';\nimport { getToken } from '../index/token';\nimport { getAllPermintaanPinjamanFunction } from './saga';\nimport { checkPermission } from '../global/globalFunction';\nimport SearchBar from '../subComponent/SearchBar';\nimport TableComponent from '../subComponent/TableComponent';\nconst columnDataUser = [{\n  id: 'id',\n  numeric: false,\n  label: 'ID Pinjaman'\n}, {\n  id: 'borrower_name',\n  numeric: false,\n  label: 'Nama Nasabah'\n}, {\n  id: 'bank_name',\n  numeric: false,\n  label: 'Nama Mitra'\n}, {\n  id: 'category',\n  numeric: false,\n  label: 'Kategori'\n}, {\n  id: 'service',\n  numeric: false,\n  label: 'Layanan'\n}, {\n  id: 'product',\n  numeric: false,\n  label: 'Produk'\n}, {\n  id: 'created_at',\n  numeric: false,\n  label: 'Tanggal Pengajuan'\n}, {\n  id: 'status',\n  numeric: false,\n  label: 'Status'\n}];\n\nclass PermintaanPinjaman extends React.Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      rows: [],\n      detailNasabah: {},\n      searchRows: '',\n      page: 1,\n      rowsPerPage: 10,\n      isEdit: false,\n      editIndex: Number,\n      udahdiklik: false,\n      total_data: 0,\n      last_page: 1,\n      loading: true,\n      BankName: '',\n      serviceName: '',\n      productName: '',\n      errorMessage: '',\n      paging: true\n    };\n    this._isMounted = false;\n\n    this.getAllData = async function () {\n      const param = {\n        rows: 10,\n        page: this.state.page\n      };\n      let hasil = this.state.searchRows;\n\n      if (hasil) {\n        param.search_all = hasil;\n      }\n\n      const data = await getAllPermintaanPinjamanFunction(param);\n      const pinjamanList = data.pinjamanList && data.pinjamanList.data;\n\n      for (const key in pinjamanList) {\n        pinjamanList[key].category = pinjamanList[key].category === \"account_executive\" ? \"Account Executive\" : pinjamanList[key].category === \"agent\" ? \"Agent\" : \"Personal\";\n        pinjamanList[key].status = pinjamanList[key].status === \"approved\" ? \"Diterima\" : pinjamanList[key].status === \"rejected\" ? \"Ditolak\" : \"Dalam Proses\";\n        pinjamanList[key].service = pinjamanList[key].service.toString();\n        pinjamanList[key].product = pinjamanList[key].product.toString();\n        pinjamanList[key].created_at = React.createElement(Moment, {\n          date: pinjamanList[key].created_at,\n          format: \" DD  MMMM  YYYY\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 99\n          },\n          __self: this\n        });\n      }\n\n      if (data) {\n        if (!data.error) {\n          this.setState({\n            loading: false,\n            rows: data.pinjamanList.data,\n            rowsPerPage: data.pinjamanList.rows,\n            total_data: data.pinjamanList.total_data,\n            last_page: data.pinjamanList.last_page,\n            page: data.pinjamanList.current_page\n          });\n        } else {\n          this.setState({\n            errorMessage: data.error\n          });\n        }\n      }\n    };\n\n    this.onBtnSearch = e => {\n      this.setState({\n        loading: true,\n        searchRows: e.target.value,\n        page: 1\n      }, () => {\n        if (this.state.paging) {\n          this.getAllData();\n        }\n      });\n    };\n\n    this.onChangePage = (current, pageSize) => {\n      this.setState({\n        loading: true,\n        page: current\n      }, () => {\n        if (this.state.paging) {\n          this.getAllData();\n        }\n      });\n    };\n  }\n\n  componentDidMount() {\n    this.getAllData();\n    this._isMounted = true;\n  }\n\n  componentWillUnmount() {\n    this._isMounted = false;\n  }\n\n  render() {\n    if (getToken()) {\n      return React.createElement(\"div\", {\n        style: {\n          padding: 0\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 139\n        },\n        __self: this\n      }, React.createElement(TableComponent, {\n        id: \"id\",\n        title: 'Pinjaman - List',\n        search: {\n          value: this.state.searchRows,\n          label: 'Search ID Pinjaman, Nama Nasabah',\n          function: this.onBtnSearch\n        },\n        paging: this.state.paging,\n        loading: this.state.loading,\n        columnData: columnDataUser,\n        data: this.state.rows,\n        page: this.state.page,\n        rowsPerPage: this.state.rowsPerPage,\n        totalData: this.state.total_data,\n        onChangePage: this.onChangePage,\n        permissionDetail: checkPermission('core_loan_get_details') ? '/permintaanpinjamanDetail/' : null,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 140\n        },\n        __self: this\n      }));\n    } else if (getToken()) {\n      return React.createElement(Redirect, {\n        to: \"/login\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 171\n        },\n        __self: this\n      });\n    }\n  }\n\n}\n\nconst mapStateToProp = state => {\n  return {\n    role: state.user.role,\n    id: state.user.id\n  };\n};\n\nexport default connect(mapStateToProp)(PermintaanPinjaman);","map":{"version":3,"sources":["C:/Users/pc/Desktop/asira_core/src/components/pinjaman/pinjamanList.js"],"names":["React","connect","Redirect","Moment","getToken","getAllPermintaanPinjamanFunction","checkPermission","SearchBar","TableComponent","columnDataUser","id","numeric","label","PermintaanPinjaman","Component","state","rows","detailNasabah","searchRows","page","rowsPerPage","isEdit","editIndex","Number","udahdiklik","total_data","last_page","loading","BankName","serviceName","productName","errorMessage","paging","_isMounted","getAllData","param","hasil","search_all","data","pinjamanList","key","category","status","service","toString","product","created_at","error","setState","current_page","onBtnSearch","e","target","value","onChangePage","current","pageSize","componentDidMount","componentWillUnmount","render","padding","function","mapStateToProp","role","user"],"mappings":";AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAAQC,OAAR,QAAuB,aAAvB;AACA,SAASC,QAAT,QAAyB,kBAAzB;AACA,OAAOC,MAAP,MAAmB,cAAnB;AACA,OAAO,oCAAP;AACA,SAASC,QAAT,QAAyB,gBAAzB;AACA,SAASC,gCAAT,QAAiD,QAAjD;AACA,SAASC,eAAT,QAAgC,0BAAhC;AACA,OAAOC,SAAP,MAAsB,2BAAtB;AACA,OAAOC,cAAP,MAA2B,gCAA3B;AAEA,MAAMC,cAAc,GAAG,CACjB;AACEC,EAAAA,EAAE,EAAE,IADN;AAEEC,EAAAA,OAAO,EAAE,KAFX;AAGEC,EAAAA,KAAK,EAAE;AAHT,CADiB,EAMjB;AACEF,EAAAA,EAAE,EAAE,eADN;AAEEC,EAAAA,OAAO,EAAE,KAFX;AAGEC,EAAAA,KAAK,EAAE;AAHT,CANiB,EAWjB;AACEF,EAAAA,EAAE,EAAE,WADN;AAEEC,EAAAA,OAAO,EAAE,KAFX;AAGEC,EAAAA,KAAK,EAAE;AAHT,CAXiB,EAgBjB;AACEF,EAAAA,EAAE,EAAE,UADN;AAEEC,EAAAA,OAAO,EAAE,KAFX;AAGEC,EAAAA,KAAK,EAAE;AAHT,CAhBiB,EAqBjB;AACEF,EAAAA,EAAE,EAAE,SADN;AAEEC,EAAAA,OAAO,EAAE,KAFX;AAGEC,EAAAA,KAAK,EAAE;AAHT,CArBiB,EA0BjB;AACEF,EAAAA,EAAE,EAAE,SADN;AAEEC,EAAAA,OAAO,EAAE,KAFX;AAGEC,EAAAA,KAAK,EAAE;AAHT,CA1BiB,EA+BjB;AACEF,EAAAA,EAAE,EAAE,YADN;AAEEC,EAAAA,OAAO,EAAE,KAFX;AAGEC,EAAAA,KAAK,EAAE;AAHT,CA/BiB,EAoCjB;AACEF,EAAAA,EAAE,EAAE,QADN;AAEEC,EAAAA,OAAO,EAAE,KAFX;AAGEC,EAAAA,KAAK,EAAE;AAHT,CApCiB,CAAvB;;AA0CA,MAAMC,kBAAN,SAAiCb,KAAK,CAACc,SAAvC,CAAiD;AAAA;AAAA;AAAA,SAC/CC,KAD+C,GACvC;AACNC,MAAAA,IAAI,EAAE,EADA;AACGC,MAAAA,aAAa,EAAC,EADjB;AACqBC,MAAAA,UAAU,EAAC,EADhC;AAENC,MAAAA,IAAI,EAAE,CAFA;AAGNC,MAAAA,WAAW,EAAE,EAHP;AAINC,MAAAA,MAAM,EAAE,KAJF;AAKNC,MAAAA,SAAS,EAACC,MALJ;AAMNC,MAAAA,UAAU,EAAG,KANP;AAONC,MAAAA,UAAU,EAAC,CAPL;AAQNC,MAAAA,SAAS,EAAC,CARJ;AASNC,MAAAA,OAAO,EAAC,IATF;AAUNC,MAAAA,QAAQ,EAAC,EAVH;AAUMC,MAAAA,WAAW,EAAC,EAVlB;AAUqBC,MAAAA,WAAW,EAAC,EAVjC;AAWNC,MAAAA,YAAY,EAAC,EAXP;AAWUC,MAAAA,MAAM,EAAC;AAXjB,KADuC;AAAA,SAgB/CC,UAhB+C,GAgBpC,KAhBoC;;AAAA,SAyB/CC,UAzB+C,GAyBlC,kBAAgB;AAC3B,YAAMC,KAAK,GAAE;AACXnB,QAAAA,IAAI,EAAC,EADM;AAEXG,QAAAA,IAAI,EAAC,KAAKJ,KAAL,CAAWI;AAFL,OAAb;AAKA,UAAIiB,KAAK,GAAG,KAAKrB,KAAL,CAAWG,UAAvB;;AAEA,UAAGkB,KAAH,EAAS;AACPD,QAAAA,KAAK,CAACE,UAAN,GAAmBD,KAAnB;AACD;;AAED,YAAME,IAAI,GAAG,MAAMjC,gCAAgC,CAAC8B,KAAD,CAAnD;AACA,YAAMI,YAAY,GAAGD,IAAI,CAACC,YAAL,IAAqBD,IAAI,CAACC,YAAL,CAAkBD,IAA5D;;AAEA,WAAK,MAAME,GAAX,IAAkBD,YAAlB,EAA+B;AAC7BA,QAAAA,YAAY,CAACC,GAAD,CAAZ,CAAkBC,QAAlB,GAA6BF,YAAY,CAACC,GAAD,CAAZ,CAAkBC,QAAlB,KAA6B,mBAA7B,GAAiD,mBAAjD,GAAsEF,YAAY,CAACC,GAAD,CAAZ,CAAkBC,QAAlB,KAA+B,OAA/B,GAAuC,OAAvC,GAA+C,UAAlJ;AACAF,QAAAA,YAAY,CAACC,GAAD,CAAZ,CAAkBE,MAAlB,GAA2BH,YAAY,CAACC,GAAD,CAAZ,CAAkBE,MAAlB,KAA4B,UAA5B,GAAuC,UAAvC,GAAmDH,YAAY,CAACC,GAAD,CAAZ,CAAkBE,MAAlB,KAA2B,UAA3B,GAAsC,SAAtC,GAAgD,cAA9H;AACAH,QAAAA,YAAY,CAACC,GAAD,CAAZ,CAAkBG,OAAlB,GAA6BJ,YAAY,CAACC,GAAD,CAAZ,CAAkBG,OAAlB,CAA0BC,QAA1B,EAA7B;AACAL,QAAAA,YAAY,CAACC,GAAD,CAAZ,CAAkBK,OAAlB,GAA6BN,YAAY,CAACC,GAAD,CAAZ,CAAkBK,OAAlB,CAA0BD,QAA1B,EAA7B;AACAL,QAAAA,YAAY,CAACC,GAAD,CAAZ,CAAkBM,UAAlB,GAA8B,oBAAC,MAAD;AAAQ,UAAA,IAAI,EAAEP,YAAY,CAACC,GAAD,CAAZ,CAAkBM,UAAhC;AAA6C,UAAA,MAAM,EAAC,iBAApD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UAA9B;AACD;;AACD,UAAGR,IAAH,EAAQ;AACN,YAAG,CAACA,IAAI,CAACS,KAAT,EAAe;AACb,eAAKC,QAAL,CAAc;AAACrB,YAAAA,OAAO,EAAC,KAAT;AACZX,YAAAA,IAAI,EAACsB,IAAI,CAACC,YAAL,CAAkBD,IADX;AAEZlB,YAAAA,WAAW,EAACkB,IAAI,CAACC,YAAL,CAAkBvB,IAFlB;AAGZS,YAAAA,UAAU,EAACa,IAAI,CAACC,YAAL,CAAkBd,UAHjB;AAIZC,YAAAA,SAAS,EAACY,IAAI,CAACC,YAAL,CAAkBb,SAJhB;AAKZP,YAAAA,IAAI,EAACmB,IAAI,CAACC,YAAL,CAAkBU;AALX,WAAd;AAMD,SAPD,MAOK;AACH,eAAKD,QAAL,CAAc;AAACjB,YAAAA,YAAY,EAACO,IAAI,CAACS;AAAnB,WAAd;AACD;AACF;AACF,KA3D8C;;AAAA,SA+D/CG,WA/D+C,GA+DhCC,CAAD,IAAK;AACf,WAAKH,QAAL,CAAc;AAACrB,QAAAA,OAAO,EAAC,IAAT;AAAcT,QAAAA,UAAU,EAACiC,CAAC,CAACC,MAAF,CAASC,KAAlC;AAAwClC,QAAAA,IAAI,EAAC;AAA7C,OAAd,EAA8D,MAAI;AAChE,YAAG,KAAKJ,KAAL,CAAWiB,MAAd,EAAqB;AACnB,eAAKE,UAAL;AAED;AACJ,OALC;AAMH,KAtE8C;;AAAA,SAyE/CoB,YAzE+C,GAyEhC,CAACC,OAAD,EAAUC,QAAV,KAAuB;AACpC,WAAKR,QAAL,CAAc;AAACrB,QAAAA,OAAO,EAAC,IAAT;AAAcR,QAAAA,IAAI,EAACoC;AAAnB,OAAd,EAA0C,MAAI;AAC5C,YAAG,KAAKxC,KAAL,CAAWiB,MAAd,EAAqB;AACnB,eAAKE,UAAL;AAED;AACF,OALD;AAMD,KAhF8C;AAAA;;AAiB/CuB,EAAAA,iBAAiB,GAAE;AACjB,SAAKvB,UAAL;AACA,SAAKD,UAAL,GAAgB,IAAhB;AACD;;AACDyB,EAAAA,oBAAoB,GAAE;AACpB,SAAKzB,UAAL,GAAgB,KAAhB;AACD;;AA2DD0B,EAAAA,MAAM,GAAG;AACR,QAAGvD,QAAQ,EAAX,EAAc;AACb,aACE;AAAK,QAAA,KAAK,EAAE;AAACwD,UAAAA,OAAO,EAAC;AAAT,SAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE,oBAAE,cAAF;AACE,QAAA,EAAE,EAAE,IADN;AAEE,QAAA,KAAK,EAAE,iBAFT;AAGE,QAAA,MAAM,EACJ;AACEP,UAAAA,KAAK,EAAE,KAAKtC,KAAL,CAAWG,UADpB;AAEEN,UAAAA,KAAK,EAAE,kCAFT;AAGEiD,UAAAA,QAAQ,EAAE,KAAKX;AAHjB,SAJJ;AAUE,QAAA,MAAM,EAAE,KAAKnC,KAAL,CAAWiB,MAVrB;AAWE,QAAA,OAAO,EAAE,KAAKjB,KAAL,CAAWY,OAXtB;AAYE,QAAA,UAAU,EAAElB,cAZd;AAaE,QAAA,IAAI,EAAE,KAAKM,KAAL,CAAWC,IAbnB;AAcE,QAAA,IAAI,EAAE,KAAKD,KAAL,CAAWI,IAdnB;AAeE,QAAA,WAAW,EAAE,KAAKJ,KAAL,CAAWK,WAf1B;AAgBE,QAAA,SAAS,EAAE,KAAKL,KAAL,CAAWU,UAhBxB;AAiBE,QAAA,YAAY,EAAE,KAAK6B,YAjBrB;AAkBE,QAAA,gBAAgB,EAAGhD,eAAe,CAAC,uBAAD,CAAf,GAA2C,4BAA3C,GAA0E,IAlB/F;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADF,CADF;AA+BH,KAhCE,MAiCM,IAAGF,QAAQ,EAAX,EAAc;AACjB,aAAQ,oBAAC,QAAD;AAAU,QAAA,EAAE,EAAC,QAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAAR;AACD;AAEF;;AAxH8C;;AA2HjD,MAAM0D,cAAc,GAAI/C,KAAD,IAAS;AAC9B,SAAM;AAEFgD,IAAAA,IAAI,EAAEhD,KAAK,CAACiD,IAAN,CAAWD,IAFf;AAGFrD,IAAAA,EAAE,EAAEK,KAAK,CAACiD,IAAN,CAAWtD;AAHb,GAAN;AAOD,CARD;;AASA,eAAeT,OAAO,CAAE6D,cAAF,CAAP,CAAyBjD,kBAAzB,CAAf","sourcesContent":["import React from 'react';\r\nimport {connect } from 'react-redux'\r\nimport { Redirect } from 'react-router-dom'\r\nimport Moment from 'react-moment'\r\nimport './../../support/css/pagination.css'\r\nimport { getToken } from '../index/token';\r\nimport { getAllPermintaanPinjamanFunction } from './saga';\r\nimport { checkPermission } from '../global/globalFunction';\r\nimport SearchBar from '../subComponent/SearchBar'\r\nimport TableComponent from '../subComponent/TableComponent'\r\n\r\nconst columnDataUser = [\r\n      {\r\n        id: 'id',\r\n        numeric: false,\r\n        label: 'ID Pinjaman',\r\n      },\r\n      {\r\n        id: 'borrower_name',\r\n        numeric: false,\r\n        label: 'Nama Nasabah',\r\n      },\r\n      {\r\n        id: 'bank_name',\r\n        numeric: false,\r\n        label: 'Nama Mitra',\r\n      },\r\n      {\r\n        id: 'category',\r\n        numeric: false,\r\n        label: 'Kategori',\r\n      },\r\n      {\r\n        id: 'service',\r\n        numeric: false,\r\n        label: 'Layanan',\r\n      },\r\n      {\r\n        id: 'product',\r\n        numeric: false,\r\n        label: 'Produk',\r\n      },\r\n      {\r\n        id: 'created_at',\r\n        numeric: false,\r\n        label: 'Tanggal Pengajuan',\r\n      },\r\n      {\r\n        id: 'status',\r\n        numeric: false,\r\n        label: 'Status',\r\n    },\r\n]\r\nclass PermintaanPinjaman extends React.Component {\r\n  state = {\r\n    rows: [],detailNasabah:{}, searchRows:'',\r\n    page: 1,\r\n    rowsPerPage: 10,\r\n    isEdit: false,\r\n    editIndex:Number,\r\n    udahdiklik : false,\r\n    total_data:0,\r\n    last_page:1,\r\n    loading:true,\r\n    BankName:'',serviceName:'',productName:'',\r\n    errorMessage:'',paging:true\r\n  };\r\n\r\n  //-----------------------------------NIKO FUNCTION-------------------------------------------------------------\r\n  _isMounted=false\r\n  componentDidMount(){\r\n    this.getAllData()\r\n    this._isMounted=true\r\n  }\r\n  componentWillUnmount(){\r\n    this._isMounted=false\r\n  }\r\n\r\n  getAllData = async function(){\r\n    const param ={\r\n      rows:10,\r\n      page:this.state.page\r\n    }\r\n\r\n    let hasil = this.state.searchRows;\r\n\r\n    if(hasil){\r\n      param.search_all = hasil\r\n    }\r\n\r\n    const data = await getAllPermintaanPinjamanFunction(param)\r\n    const pinjamanList = data.pinjamanList && data.pinjamanList.data\r\n\r\n    for (const key in pinjamanList){\r\n      pinjamanList[key].category = pinjamanList[key].category===\"account_executive\"?\"Account Executive\" :pinjamanList[key].category === \"agent\"?\"Agent\":\"Personal\"\r\n      pinjamanList[key].status = pinjamanList[key].status ===\"approved\"?\"Diterima\": pinjamanList[key].status===\"rejected\"?\"Ditolak\":\"Dalam Proses\"\r\n      pinjamanList[key].service =  pinjamanList[key].service.toString()\r\n      pinjamanList[key].product =  pinjamanList[key].product.toString()\r\n      pinjamanList[key].created_at =<Moment date={pinjamanList[key].created_at } format=\" DD  MMMM  YYYY\" />\r\n    }\r\n    if(data){\r\n      if(!data.error){\r\n        this.setState({loading:false,\r\n          rows:data.pinjamanList.data, \r\n          rowsPerPage:data.pinjamanList.rows,\r\n          total_data:data.pinjamanList.total_data,\r\n          last_page:data.pinjamanList.last_page,\r\n          page:data.pinjamanList.current_page})\r\n      }else{\r\n        this.setState({errorMessage:data.error})\r\n      }\r\n    }\r\n  }\r\n\r\n\r\n\r\n  onBtnSearch = (e)=>{\r\n      this.setState({loading:true,searchRows:e.target.value,page:1},()=>{\r\n        if(this.state.paging){\r\n          this.getAllData()\r\n\r\n        }\r\n    })\r\n  }\r\n\r\n\r\n  onChangePage = (current, pageSize) => {\r\n    this.setState({loading:true,page:current},()=>{\r\n      if(this.state.paging){\r\n        this.getAllData()\r\n\r\n      }\r\n    })\r\n  }\r\n\r\n  render() {\r\n   if(getToken()){\r\n    return (\r\n      <div style={{padding:0}}>\r\n        < TableComponent\r\n          id={\"id\"}\r\n          title={'Pinjaman - List'}\r\n          search={\r\n            {\r\n              value: this.state.searchRows,\r\n              label: 'Search ID Pinjaman, Nama Nasabah',\r\n              function: this.onBtnSearch,\r\n            }\r\n        }\r\n          paging={this.state.paging}\r\n          loading={this.state.loading}\r\n          columnData={columnDataUser}\r\n          data={this.state.rows}\r\n          page={this.state.page}\r\n          rowsPerPage={this.state.rowsPerPage}\r\n          totalData={this.state.total_data}\r\n          onChangePage={this.onChangePage}             \r\n          permissionDetail={ checkPermission('core_loan_get_details') ? '/permintaanpinjamanDetail/' : null}\r\n\r\n        /> \r\n        \r\n        </div>\r\n      \r\n\r\n    );\r\n  \r\n  \r\n\r\n}\r\n    else if(getToken()){\r\n      return  <Redirect to='/login' />\r\n    }\r\n    \r\n  }\r\n}\r\n\r\nconst mapStateToProp = (state)=>{\r\n  return{\r\n     \r\n      role: state.user.role,\r\n      id: state.user.id\r\n     \r\n  }\r\n  \r\n}\r\nexport default connect (mapStateToProp)(PermintaanPinjaman) ;\r\n"]},"metadata":{},"sourceType":"module"}