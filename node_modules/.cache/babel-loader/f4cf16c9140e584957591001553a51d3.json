{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\pc\\\\Desktop\\\\asira_core\\\\src\\\\components\\\\user\\\\userList.js\";\nimport React from 'react';\nimport Cookies from 'universal-cookie';\nimport { Redirect } from 'react-router-dom';\nimport Loader from 'react-loader-spinner';\nimport { Link } from 'react-router-dom'; // import SubTable from './../subComponent/SubTable'\n\nimport localeInfo from 'rc-pagination/lib/locale/id_ID';\nimport Pagination from 'rc-pagination';\nimport { getAllUserFunction } from './saga';\nimport { checkPermission } from '../global/globalFunction';\nimport { getAllRoleFunction } from '../rolePermission/saga';\nconst cookie = new Cookies(); // const columnDataRole = [\n//     {\n//         id: 'id',\n//         numeric: 'true',\n//         disablePadding: false,\n//         label: 'Id Role Permission',\n//     },\n//     {\n//         id: 'name',\n//         numeric: 'false',\n//         disablePadding: true,\n//         label: 'Nama Role',\n//     },\n//     { id: 'status', numeric: 'false', disablePadding: true, label: 'Status' },\n//     {\n//         id: 'updated_time',\n//         numeric: 'false',\n//         disablePadding: false,\n//         label: 'Update Date',\n//         time: 'true',\n//     },\n// ]\n\nclass UserList extends React.Component {\n  constructor(props) {\n    super(props);\n    this._isMounted = false;\n\n    this.refresh = async function () {\n      const param = {};\n      param.rows = this.state.rowsPerPage;\n      param.page = this.state.page;\n      const data = await getAllUserFunction(param, getAllRoleFunction);\n\n      if (data) {\n        if (!data.error) {\n          const dataListUser = data.dataUser || [];\n\n          if (dataListUser.length !== 0) {\n            for (const key in dataListUser) {\n              dataListUser[key].role = this.findRole(dataListUser[key].role_id, data.dataRole || []);\n            }\n          }\n\n          this.setState({\n            listUser: dataListUser,\n            totalData: data.totalData,\n            loading: false\n          });\n        } else {\n          this.setState({\n            errorMessage: data.error,\n            loading: false\n          });\n        }\n      }\n    };\n\n    this.findRole = (roleId, dataRole) => {\n      let role = '';\n\n      for (const key in dataRole) {\n        if (dataRole[key].id === roleId) {\n          role = dataRole[key].name;\n        }\n      }\n\n      return role;\n    };\n\n    this.renderJSX = () => {\n      if (this.state.loading || !this.state.listUser) {\n        return React.createElement(\"tr\", {\n          key: \"zz\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 108\n          },\n          __self: this\n        }, React.createElement(\"td\", {\n          align: \"center\",\n          colSpan: 6,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 109\n          },\n          __self: this\n        }, React.createElement(Loader, {\n          type: \"Circles\",\n          color: \"#00BFFF\",\n          height: \"40\",\n          width: \"40\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 110\n          },\n          __self: this\n        })));\n      }\n\n      var jsx = this.state.listUser.map((val, index) => {\n        return React.createElement(\"tr\", {\n          key: index,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 124\n          },\n          __self: this\n        }, React.createElement(\"td\", {\n          align: \"center\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 125\n          },\n          __self: this\n        }, this.state.page > 1 ? index + 1 + this.state.rowsPerPage * (this.state.page - 1) : index + 1), React.createElement(\"td\", {\n          align: \"center\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 126\n          },\n          __self: this\n        }, val.id), React.createElement(\"td\", {\n          align: \"center\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 127\n          },\n          __self: this\n        }, val.username), React.createElement(\"td\", {\n          align: \"center\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 128\n          },\n          __self: this\n        }, val.role), React.createElement(\"td\", {\n          align: \"center\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 129\n          },\n          __self: this\n        }, val.status ? \"Aktif\" : \"Tidak Aktif\"), React.createElement(\"td\", {\n          align: \"center\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 130\n          },\n          __self: this\n        }, checkPermission('User_Edit') && React.createElement(Link, {\n          to: `/editUser/${val.id}`,\n          className: \"mr-2\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 132\n          },\n          __self: this\n        }, React.createElement(\"i\", {\n          className: \"fas fa-edit\",\n          style: {\n            color: \"black\",\n            fontSize: \"18px\"\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 133\n          },\n          __self: this\n        })), React.createElement(Link, {\n          to: `/detailUser/${val.id}`,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 136\n          },\n          __self: this\n        }, React.createElement(\"i\", {\n          className: \"fas fa-eye\",\n          style: {\n            color: \"black\",\n            fontSize: \"18px\"\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 137\n          },\n          __self: this\n        }))));\n      });\n      return jsx;\n    };\n\n    this.onChangePage = (current, pageSize) => {\n      this.setState({\n        loading: true,\n        page: current\n      }, () => {\n        this.refresh();\n      });\n    };\n\n    this.state = {\n      loading: true,\n      listUser: [],\n      page: 1,\n      rowsPerPage: 10\n    };\n  }\n\n  componentDidMount() {\n    this._isMounted = true;\n    this.refresh();\n  }\n\n  componentWillUnmount() {\n    this._isMounted = false;\n  }\n\n  render() {\n    if (cookie.get('token')) {\n      return React.createElement(\"div\", {\n        className: \"container\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 164\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"row\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 165\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"col-7\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 166\n        },\n        __self: this\n      }, React.createElement(\"h2\", {\n        className: \"mt-3\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 167\n        },\n        __self: this\n      }, \"Akun - List\")), React.createElement(\"div\", {\n        className: \"col-12\",\n        style: {\n          color: \"red\",\n          fontSize: \"15px\",\n          textAlign: 'left'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 169\n        },\n        __self: this\n      }, this.state.errorMessage)), React.createElement(\"hr\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 173\n        },\n        __self: this\n      }), React.createElement(\"table\", {\n        className: \"table table-hover\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 186\n        },\n        __self: this\n      }, React.createElement(\"thead\", {\n        className: \"table-warning\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 187\n        },\n        __self: this\n      }, React.createElement(\"tr\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 188\n        },\n        __self: this\n      }, React.createElement(\"th\", {\n        className: \"text-center\",\n        scope: \"col\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 189\n        },\n        __self: this\n      }, \"#\"), React.createElement(\"th\", {\n        className: \"text-center\",\n        scope: \"col\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 190\n        },\n        __self: this\n      }, \"ID Akun\"), React.createElement(\"th\", {\n        className: \"text-center\",\n        scope: \"col\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 191\n        },\n        __self: this\n      }, \"Nama Akun\"), React.createElement(\"th\", {\n        className: \"text-center\",\n        scope: \"col\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 192\n        },\n        __self: this\n      }, \"Role\"), React.createElement(\"th\", {\n        className: \"text-center\",\n        scope: \"col\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 193\n        },\n        __self: this\n      }, \"Status\"), React.createElement(\"th\", {\n        className: \"text-center\",\n        scope: \"col\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 194\n        },\n        __self: this\n      }, \"Action\"))), React.createElement(\"tbody\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 197\n        },\n        __self: this\n      }, this.renderJSX())), React.createElement(\"hr\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 201\n        },\n        __self: this\n      }), React.createElement(\"nav\", {\n        className: \"navbar\",\n        style: {\n          float: \"right\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 202\n        },\n        __self: this\n      }, React.createElement(Pagination, {\n        className: \"ant-pagination\",\n        showTotal: (total, range) => `${range[0]} - ${range[1]} of ${total} items`,\n        total: this.state.totalData,\n        pageSize: this.state.rowsPerPage,\n        onChange: this.onChangePage,\n        locale: localeInfo,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 204\n        },\n        __self: this\n      })));\n    }\n\n    if (!cookie.get('token')) {\n      return React.createElement(Redirect, {\n        to: \"/login\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 217\n        },\n        __self: this\n      });\n    }\n  }\n\n}\n\nexport default UserList;","map":{"version":3,"sources":["C:/Users/pc/Desktop/asira_core/src/components/user/userList.js"],"names":["React","Cookies","Redirect","Loader","Link","localeInfo","Pagination","getAllUserFunction","checkPermission","getAllRoleFunction","cookie","UserList","Component","constructor","props","_isMounted","refresh","param","rows","state","rowsPerPage","page","data","error","dataListUser","dataUser","length","key","role","findRole","role_id","dataRole","setState","listUser","totalData","loading","errorMessage","roleId","id","name","renderJSX","jsx","map","val","index","username","status","color","fontSize","onChangePage","current","pageSize","componentDidMount","componentWillUnmount","render","get","textAlign","float","total","range"],"mappings":";AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,OAAP,MAAoB,kBAApB;AACA,SAASC,QAAT,QAAyB,kBAAzB;AACA,OAAOC,MAAP,MAAmB,sBAAnB;AACA,SAAQC,IAAR,QAAmB,kBAAnB,C,CACA;;AACA,OAAOC,UAAP,MAAuB,gCAAvB;AACA,OAAOC,UAAP,MAAuB,eAAvB;AACA,SAAQC,kBAAR,QAAiC,QAAjC;AACA,SAASC,eAAT,QAAgC,0BAAhC;AACA,SAASC,kBAAT,QAAmC,wBAAnC;AAGA,MAAMC,MAAM,GAAG,IAAIT,OAAJ,EAAf,C,CAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,MAAMU,QAAN,SAAuBX,KAAK,CAACY,SAA7B,CAAsC;AAGlCC,EAAAA,WAAW,CAACC,KAAD,EAAQ;AACf,UAAMA,KAAN;AADe,SAFnBC,UAEmB,GAFN,KAEM;;AAAA,SAmBnBC,OAnBmB,GAmBT,kBAAgB;AACtB,YAAMC,KAAK,GAAG,EAAd;AACAA,MAAAA,KAAK,CAACC,IAAN,GAAa,KAAKC,KAAL,CAAWC,WAAxB;AACAH,MAAAA,KAAK,CAACI,IAAN,GAAa,KAAKF,KAAL,CAAWE,IAAxB;AAEA,YAAMC,IAAI,GAAG,MAAMf,kBAAkB,CAACU,KAAD,EAAQR,kBAAR,CAArC;;AAEA,UAAGa,IAAH,EAAS;AACL,YAAG,CAACA,IAAI,CAACC,KAAT,EAAgB;AACZ,gBAAMC,YAAY,GAAGF,IAAI,CAACG,QAAL,IAAiB,EAAtC;;AAEA,cAAGD,YAAY,CAACE,MAAb,KAAwB,CAA3B,EAA8B;AAC1B,iBAAI,MAAMC,GAAV,IAAiBH,YAAjB,EAA+B;AAC3BA,cAAAA,YAAY,CAACG,GAAD,CAAZ,CAAkBC,IAAlB,GAAyB,KAAKC,QAAL,CAAcL,YAAY,CAACG,GAAD,CAAZ,CAAkBG,OAAhC,EAAyCR,IAAI,CAACS,QAAL,IAAiB,EAA1D,CAAzB;AACH;AACJ;;AAED,eAAKC,QAAL,CAAc;AACVC,YAAAA,QAAQ,EAAET,YADA;AAEVU,YAAAA,SAAS,EAAEZ,IAAI,CAACY,SAFN;AAGVC,YAAAA,OAAO,EAAE;AAHC,WAAd;AAKH,SAdD,MAcO;AACH,eAAKH,QAAL,CAAc;AACVI,YAAAA,YAAY,EAAEd,IAAI,CAACC,KADT;AAEVY,YAAAA,OAAO,EAAE;AAFC,WAAd;AAIH;AACJ;AACJ,KAhDkB;;AAAA,SAkDnBN,QAlDmB,GAkDR,CAACQ,MAAD,EAASN,QAAT,KAAsB;AAC7B,UAAIH,IAAI,GAAG,EAAX;;AAEA,WAAI,MAAMD,GAAV,IAAiBI,QAAjB,EAA2B;AACvB,YAAGA,QAAQ,CAACJ,GAAD,CAAR,CAAcW,EAAd,KAAqBD,MAAxB,EAAgC;AAC5BT,UAAAA,IAAI,GAAGG,QAAQ,CAACJ,GAAD,CAAR,CAAcY,IAArB;AACH;AACJ;;AAED,aAAOX,IAAP;AACH,KA5DkB;;AAAA,SA8DnBY,SA9DmB,GA8DP,MAAM;AAEd,UAAI,KAAKrB,KAAL,CAAWgB,OAAX,IAAsB,CAAC,KAAKhB,KAAL,CAAWc,QAAtC,EAA+C;AAC3C,eACE;AAAK,UAAA,GAAG,EAAC,IAAT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WACE;AAAI,UAAA,KAAK,EAAC,QAAV;AAAmB,UAAA,OAAO,EAAE,CAA5B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WACI,oBAAC,MAAD;AACI,UAAA,IAAI,EAAC,SADT;AAEI,UAAA,KAAK,EAAC,SAFV;AAGI,UAAA,MAAM,EAAC,IAHX;AAII,UAAA,KAAK,EAAC,IAJV;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UADJ,CADF,CADF;AAYH;;AAGD,UAAIQ,GAAG,GAAG,KAAKtB,KAAL,CAAWc,QAAX,CAAoBS,GAApB,CAAwB,CAACC,GAAD,EAAKC,KAAL,KAAa;AAC3C,eACI;AAAI,UAAA,GAAG,EAAEA,KAAT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WACI;AAAI,UAAA,KAAK,EAAC,QAAV;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WAAoB,KAAKzB,KAAL,CAAWE,IAAX,GAAiB,CAAjB,GAAsBuB,KAAK,GAAC,CAAN,GAAU,KAAKzB,KAAL,CAAWC,WAAX,IAAwB,KAAKD,KAAL,CAAWE,IAAX,GAAgB,CAAxC,CAAhC,GAA8EuB,KAAK,GAAC,CAAxG,CADJ,EAEI;AAAI,UAAA,KAAK,EAAC,QAAV;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WAAoBD,GAAG,CAACL,EAAxB,CAFJ,EAGI;AAAI,UAAA,KAAK,EAAC,QAAV;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WAAoBK,GAAG,CAACE,QAAxB,CAHJ,EAII;AAAI,UAAA,KAAK,EAAC,QAAV;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WAAoBF,GAAG,CAACf,IAAxB,CAJJ,EAKI;AAAI,UAAA,KAAK,EAAC,QAAV;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WAAoBe,GAAG,CAACG,MAAJ,GAAa,OAAb,GAAuB,aAA3C,CALJ,EAMI;AAAI,UAAA,KAAK,EAAC,QAAV;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WACQtC,eAAe,CAAC,WAAD,CAAf,IACA,oBAAC,IAAD;AAAM,UAAA,EAAE,EAAG,aAAYmC,GAAG,CAACL,EAAG,EAA9B;AAAiC,UAAA,SAAS,EAAC,MAA3C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WACI;AAAG,UAAA,SAAS,EAAC,aAAb;AAA2B,UAAA,KAAK,EAAE;AAACS,YAAAA,KAAK,EAAC,OAAP;AAAeC,YAAAA,QAAQ,EAAC;AAAxB,WAAlC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UADJ,CAFR,EAMI,oBAAC,IAAD;AAAM,UAAA,EAAE,EAAG,eAAcL,GAAG,CAACL,EAAG,EAAhC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WACI;AAAG,UAAA,SAAS,EAAC,YAAb;AAA0B,UAAA,KAAK,EAAE;AAACS,YAAAA,KAAK,EAAC,OAAP;AAAeC,YAAAA,QAAQ,EAAC;AAAxB,WAAjC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UADJ,CANJ,CANJ,CADJ;AAoBH,OArBS,CAAV;AAuBA,aAAOP,GAAP;AAEH,KAzGkB;;AAAA,SA2GnBQ,YA3GmB,GA2GJ,CAACC,OAAD,EAAUC,QAAV,KAAuB;AAClC,WAAKnB,QAAL,CAAc;AACVG,QAAAA,OAAO,EAAC,IADE;AAEVd,QAAAA,IAAI,EAAC6B;AAFK,OAAd,EAGG,MAAM;AACL,aAAKlC,OAAL;AACH,OALD;AAMH,KAlHkB;;AAEf,SAAKG,KAAL,GAAa;AACTgB,MAAAA,OAAO,EAAC,IADC;AAETF,MAAAA,QAAQ,EAAE,EAFD;AAGTZ,MAAAA,IAAI,EAAE,CAHG;AAITD,MAAAA,WAAW,EAAE;AAJJ,KAAb;AAMH;;AAEDgC,EAAAA,iBAAiB,GAAE;AACf,SAAKrC,UAAL,GAAkB,IAAlB;AACA,SAAKC,OAAL;AACH;;AAEDqC,EAAAA,oBAAoB,GAAG;AACnB,SAAKtC,UAAL,GAAkB,KAAlB;AACH;;AAqGDuC,EAAAA,MAAM,GAAE;AAEJ,QAAG5C,MAAM,CAAC6C,GAAP,CAAW,OAAX,CAAH,EAAuB;AACnB,aACI;AAAK,QAAA,SAAS,EAAC,WAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACI;AAAK,QAAA,SAAS,EAAC,KAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACI;AAAK,QAAA,SAAS,EAAC,OAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACI;AAAI,QAAA,SAAS,EAAC,MAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBADJ,CADJ,EAII;AAAK,QAAA,SAAS,EAAC,QAAf;AAAwB,QAAA,KAAK,EAAE;AAACR,UAAAA,KAAK,EAAC,KAAP;AAAaC,UAAAA,QAAQ,EAAC,MAAtB;AAA6BQ,UAAAA,SAAS,EAAC;AAAvC,SAA/B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACK,KAAKrC,KAAL,CAAWiB,YADhB,CAJJ,CADJ,EASG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QATH,EAsBG;AAAO,QAAA,SAAS,EAAC,mBAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACA;AAAO,QAAA,SAAS,EAAC,eAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACK;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACI;AAAI,QAAA,SAAS,EAAC,aAAd;AAA4B,QAAA,KAAK,EAAC,KAAlC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aADJ,EAEI;AAAI,QAAA,SAAS,EAAC,aAAd;AAA4B,QAAA,KAAK,EAAC,KAAlC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBAFJ,EAGI;AAAI,QAAA,SAAS,EAAC,aAAd;AAA4B,QAAA,KAAK,EAAC,KAAlC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBAHJ,EAII;AAAI,QAAA,SAAS,EAAC,aAAd;AAA4B,QAAA,KAAK,EAAC,KAAlC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBAJJ,EAKI;AAAI,QAAA,SAAS,EAAC,aAAd;AAA4B,QAAA,KAAK,EAAC,KAAlC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBALJ,EAMI;AAAI,QAAA,SAAS,EAAC,aAAd;AAA4B,QAAA,KAAK,EAAC,KAAlC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBANJ,CADL,CADA,EAWI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACI,KAAKI,SAAL,EADJ,CAXJ,CAtBH,EAqCG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QArCH,EAsCI;AAAK,QAAA,SAAS,EAAC,QAAf;AAAwB,QAAA,KAAK,EAAE;AAACiB,UAAAA,KAAK,EAAC;AAAP,SAA/B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAEI,oBAAC,UAAD;AAAY,QAAA,SAAS,EAAC,gBAAtB;AACI,QAAA,SAAS,EAAE,CAACC,KAAD,EAAQC,KAAR,KAAmB,GAAEA,KAAK,CAAC,CAAD,CAAI,MAAKA,KAAK,CAAC,CAAD,CAAI,OAAMD,KAAM,QADvE;AAEI,QAAA,KAAK,EAAE,KAAKvC,KAAL,CAAWe,SAFtB;AAGI,QAAA,QAAQ,EAAE,KAAKf,KAAL,CAAWC,WAHzB;AAII,QAAA,QAAQ,EAAE,KAAK6B,YAJnB;AAKI,QAAA,MAAM,EAAE5C,UALZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAFJ,CAtCJ,CADJ;AAmDH;;AACD,QAAG,CAACK,MAAM,CAAC6C,GAAP,CAAW,OAAX,CAAJ,EAAwB;AACpB,aACI,oBAAC,QAAD;AAAU,QAAA,EAAE,EAAC,QAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADJ;AAGH;AAEJ;;AAtLiC;;AAyLtC,eAAe5C,QAAf","sourcesContent":["import React from 'react'\r\nimport Cookies from 'universal-cookie';\r\nimport { Redirect } from 'react-router-dom'\r\nimport Loader from 'react-loader-spinner'\r\nimport {Link} from 'react-router-dom'\r\n// import SubTable from './../subComponent/SubTable'\r\nimport localeInfo from 'rc-pagination/lib/locale/id_ID'\r\nimport Pagination from 'rc-pagination';\r\nimport {getAllUserFunction} from './saga'\r\nimport { checkPermission } from '../global/globalFunction';\r\nimport { getAllRoleFunction } from '../rolePermission/saga';\r\n\r\n\r\nconst cookie = new Cookies()\r\n\r\n// const columnDataRole = [\r\n//     {\r\n//         id: 'id',\r\n//         numeric: 'true',\r\n//         disablePadding: false,\r\n//         label: 'Id Role Permission',\r\n//     },\r\n//     {\r\n//         id: 'name',\r\n//         numeric: 'false',\r\n//         disablePadding: true,\r\n//         label: 'Nama Role',\r\n//     },\r\n//     { id: 'status', numeric: 'false', disablePadding: true, label: 'Status' },\r\n//     {\r\n//         id: 'updated_time',\r\n//         numeric: 'false',\r\n//         disablePadding: false,\r\n//         label: 'Update Date',\r\n//         time: 'true',\r\n//     },\r\n// ]\r\n\r\nclass UserList extends React.Component{\r\n    _isMounted = false;\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            loading:true, \r\n            listUser: [],\r\n            page: 1,\r\n            rowsPerPage: 10,\r\n        }\r\n    }\r\n\r\n    componentDidMount(){\r\n        this._isMounted = true;\r\n        this.refresh()\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        this._isMounted = false;\r\n    }\r\n\r\n    refresh = async function(){\r\n        const param = {};\r\n        param.rows = this.state.rowsPerPage;\r\n        param.page = this.state.page;\r\n\r\n        const data = await getAllUserFunction(param, getAllRoleFunction);\r\n\r\n        if(data) {\r\n            if(!data.error) {\r\n                const dataListUser = data.dataUser || [];\r\n\r\n                if(dataListUser.length !== 0) {\r\n                    for(const key in dataListUser) {\r\n                        dataListUser[key].role = this.findRole(dataListUser[key].role_id, data.dataRole || [])\r\n                    }\r\n                }\r\n                \r\n                this.setState({\r\n                    listUser: dataListUser,\r\n                    totalData: data.totalData,\r\n                    loading: false,\r\n                })\r\n            } else {\r\n                this.setState({\r\n                    errorMessage: data.error,\r\n                    loading: false,\r\n                })\r\n            }      \r\n        }\r\n    }\r\n\r\n    findRole = (roleId, dataRole) => {\r\n        let role = '';\r\n\r\n        for(const key in dataRole) {\r\n            if(dataRole[key].id === roleId) {\r\n                role = dataRole[key].name\r\n            }\r\n        }\r\n\r\n        return role;\r\n    }\r\n\r\n    renderJSX = () => {\r\n\r\n        if (this.state.loading || !this.state.listUser){\r\n            return  (\r\n              <tr  key=\"zz\">\r\n                <td align=\"center\" colSpan={6}>\r\n                    <Loader \r\n                        type=\"Circles\"\r\n                        color=\"#00BFFF\"\r\n                        height=\"40\"\t\r\n                        width=\"40\"\r\n                    />   \r\n                </td>\r\n              </tr>\r\n            )\r\n        }\r\n        \r\n        \r\n        var jsx = this.state.listUser.map((val,index)=>{\r\n            return(\r\n                <tr key={index}>\r\n                    <td align=\"center\">{this.state.page >1 ? (index+1 + this.state.rowsPerPage*(this.state.page-1)) : index+1}</td>\r\n                    <td align=\"center\">{val.id}</td>\r\n                    <td align=\"center\">{val.username}</td>\r\n                    <td align=\"center\">{val.role}</td>\r\n                    <td align=\"center\">{val.status ? \"Aktif\" : \"Tidak Aktif\"}</td>\r\n                    <td align=\"center\">\r\n                        {   checkPermission('User_Edit') &&\r\n                            <Link to={`/editUser/${val.id}`} className=\"mr-2\">\r\n                                <i className=\"fas fa-edit\" style={{color:\"black\",fontSize:\"18px\"}}/>\r\n                            </Link>\r\n                        }\r\n                        <Link to={`/detailUser/${val.id}`} >\r\n                            <i className=\"fas fa-eye\" style={{color:\"black\",fontSize:\"18px\"}}/>\r\n                        </Link>\r\n                    </td>\r\n                </tr>  \r\n            )\r\n                   \r\n        })\r\n                     \r\n        return jsx;\r\n\r\n    }\r\n\r\n    onChangePage = (current, pageSize) => {\r\n        this.setState({\r\n            loading:true,\r\n            page:current,\r\n        }, () => {\r\n            this.refresh();\r\n        })\r\n    }\r\n    \r\n\r\n\r\n    render(){\r\n\r\n        if(cookie.get('token')){\r\n            return(\r\n                <div className=\"container\">\r\n                    <div className=\"row\">\r\n                        <div className=\"col-7\">\r\n                            <h2 className=\"mt-3\">Akun - List</h2>\r\n                        </div>\r\n                        <div className=\"col-12\" style={{color:\"red\",fontSize:\"15px\",textAlign:'left'}}>\r\n                            {this.state.errorMessage}\r\n                        </div>   \r\n                    </div>\r\n                   <hr/>\r\n\r\n                   {/* <SubTable\r\n                        // headerTitle={'List Application'}\r\n                        // search={this.state.flagAdd ? searchBar : null}\r\n                        columnData={columnDataRole}\r\n                        data={this.state.listUser}\r\n                        idKey={'id'}\r\n                        // onAddFunction={\r\n                        //     // this.state.flagAdd ? this.handleAddApplication : null\r\n                        // }\r\n                        // onRowClickedFunction={this.handleViewApplication}\r\n                    /> */}\r\n                   <table className=\"table table-hover\">\r\n                   <thead className=\"table-warning\">\r\n                        <tr >\r\n                            <th className=\"text-center\" scope=\"col\">#</th>\r\n                            <th className=\"text-center\" scope=\"col\">ID Akun</th>\r\n                            <th className=\"text-center\" scope=\"col\">Nama Akun</th>\r\n                            <th className=\"text-center\" scope=\"col\">Role</th>\r\n                            <th className=\"text-center\" scope=\"col\">Status</th>\r\n                            <th className=\"text-center\" scope=\"col\">Action</th>\r\n                        </tr>     \r\n                    </thead>\r\n                       <tbody>\r\n                          {this.renderJSX()}\r\n                       </tbody>\r\n                   </table>\r\n                   <hr></hr>\r\n                    <nav className=\"navbar\" style={{float:\"right\"}}> \r\n\r\n                        <Pagination className=\"ant-pagination\"  \r\n                            showTotal={(total, range) => `${range[0]} - ${range[1]} of ${total} items`}\r\n                            total={this.state.totalData}\r\n                            pageSize={this.state.rowsPerPage}\r\n                            onChange={this.onChangePage}\r\n                            locale={localeInfo}\r\n                        />     \r\n                    </nav>\r\n                </div>\r\n            )\r\n        }\r\n        if(!cookie.get('token')){\r\n            return (\r\n                <Redirect to='/login' />\r\n            )    \r\n        }\r\n       \r\n    }\r\n}\r\n\r\nexport default UserList;"]},"metadata":{},"sourceType":"module"}