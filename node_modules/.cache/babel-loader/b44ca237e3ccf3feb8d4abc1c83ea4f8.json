{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\pc\\\\Desktop\\\\asira_core\\\\src\\\\App.js\";\nimport React from 'react';\nimport { withRouter } from 'react-router-dom';\nimport axios from 'axios';\nimport { connect } from 'react-redux';\nimport { keepLogin } from './1.actions';\nimport './App.css';\nimport { serverUrl } from './components/url';\nimport Login from './components/index/login';\nimport { getToken, setTokenAuth, getProfileUser, getTokenAuth } from './components/index/token';\nimport ResponsiveDrawer from './components/subComponent/Drawer';\nimport { Grid } from '@material-ui/core';\n\nclass App extends React.Component {\n  constructor(...args) {\n    super(...args);\n    this._isMounted = false;\n    this.state = {\n      loading: true\n    };\n\n    this.getAuth = () => {\n      var url = serverUrl + \"clientauth\";\n      axios.get(url, {\n        auth: {\n          username: 'reactkey',\n          password: 'reactsecret'\n        }\n      }).then(res => {\n        setTokenAuth(res.data.token);\n        this.setState({\n          loading: false\n        });\n      }).catch(err => {\n        setTimeout(function () {\n          alert(\"Coba reload halaman/ cek koneksi internet\");\n        }, 5000);\n      });\n    };\n\n    this.checkUbahPasswordLink = (path, token) => {\n      let flag = false;\n\n      if (path && token) {\n        if (path.split('/')[1] && path.split('/')[1] === 'ubahpassword' && token.split('token=')[1] && token.split('token=')[1].length !== 0) {\n          flag = true;\n        }\n      }\n\n      return flag;\n    };\n  }\n\n  componentDidMount() {\n    this._isMounted = true;\n    this.getAuth();\n  }\n\n  componentWillUnmount() {\n    this._isMounted = false;\n  }\n\n  componentDidUpdate() {\n    if (!getTokenAuth()) {\n      this.getAuth();\n    }\n  }\n\n  render() {\n    if (this.state.loading) {\n      return React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 72\n        },\n        __self: this\n      }, \" loading ....\");\n    }\n\n    return React.createElement(Grid, {\n      container: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 77\n      },\n      __self: this\n    }, getToken() && getProfileUser() ? React.createElement(ResponsiveDrawer, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 80\n      },\n      __self: this\n    }) : React.createElement(Login, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 81\n      },\n      __self: this\n    }));\n  }\n\n}\n\nconst mapStateToProps = state => {\n  return {\n    id: state.user.id\n  };\n};\n\nexport default withRouter(connect(mapStateToProps, {\n  keepLogin\n})(App));","map":{"version":3,"sources":["C:/Users/pc/Desktop/asira_core/src/App.js"],"names":["React","withRouter","axios","connect","keepLogin","serverUrl","Login","getToken","setTokenAuth","getProfileUser","getTokenAuth","ResponsiveDrawer","Grid","App","Component","_isMounted","state","loading","getAuth","url","get","auth","username","password","then","res","data","token","setState","catch","err","setTimeout","alert","checkUbahPasswordLink","path","flag","split","length","componentDidMount","componentWillUnmount","componentDidUpdate","render","mapStateToProps","id","user"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport {withRouter} from 'react-router-dom'\r\nimport axios from 'axios'\r\nimport {connect} from 'react-redux'\r\nimport {keepLogin} from './1.actions'\r\nimport './App.css';\r\n\r\nimport {serverUrl} from './components/url'\r\nimport Login from './components/index/login'\r\nimport { getToken, setTokenAuth, getProfileUser, getTokenAuth } from './components/index/token';\r\nimport ResponsiveDrawer from './components/subComponent/Drawer';\r\n\r\nimport { Grid } from '@material-ui/core';\r\n\r\nclass App extends React.Component {\r\n  _isMounted = false;\r\n\r\n  state = {\r\n    loading : true , \r\n  }\r\n\r\n  componentDidMount(){\r\n    this._isMounted=true;\r\n    this.getAuth()\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    this._isMounted = false;\r\n  }\r\n\r\n  componentDidUpdate () {\r\n    if(!getTokenAuth()) {\r\n      this.getAuth()\r\n    }\r\n  }\r\n\r\n  getAuth = ()=>{\r\n    var url =serverUrl+\"clientauth\"\r\n    axios.get(url ,{\r\n        auth : {\r\n          username : 'reactkey',\r\n          password : 'reactsecret'\r\n        }\r\n    }).then((res)=>{\r\n\r\n        setTokenAuth(res.data.token);\r\n        \r\n        this.setState({loading : false})   \r\n    }).catch((err)=>{\r\n      setTimeout(function(){ alert(\"Coba reload halaman/ cek koneksi internet\"); }, 5000);\r\n    })\r\n  }\r\n\r\n  checkUbahPasswordLink= (path, token) => {\r\n    let flag = false;\r\n\r\n    if(path && token) {\r\n      if(\r\n        path.split('/')[1] && path.split('/')[1] === 'ubahpassword' &&\r\n        token.split('token=')[1] && token.split('token=')[1].length !== 0\r\n      ) {\r\n        flag = true;\r\n      }\r\n    }\r\n    return flag\r\n  }\r\n\r\n  render() {  \r\n    \r\n    if(this.state.loading){\r\n      return(\r\n        <p> loading ....</p>\r\n      )\r\n    }\r\n\r\n    return (\r\n      <Grid container>\r\n        {\r\n          getToken() && getProfileUser() ?\r\n          <ResponsiveDrawer /> :\r\n          <Login />\r\n        }\r\n        \r\n      </Grid>\r\n      \r\n    \r\n    );\r\n \r\n  }\r\n}\r\n  \r\nconst mapStateToProps = (state)=>{\r\n  return {\r\n      id : state.user.id\r\n\r\n  }\r\n}\r\n\r\nexport default withRouter(connect(mapStateToProps,{keepLogin}) (App));"]},"metadata":{},"sourceType":"module"}