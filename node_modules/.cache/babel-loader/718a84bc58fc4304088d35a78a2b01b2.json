{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\pc\\\\Desktop\\\\asira_core\\\\src\\\\components\\\\layanan\\\\layananAdd.js\";\nimport React from 'react';\nimport './../../support/css/layananAdd.css';\nimport { Redirect } from 'react-router-dom';\nimport swal from 'sweetalert';\nimport { addLayananFunction } from './saga';\nimport { getToken } from '../index/token';\n\nclass LayananAdd extends React.Component {\n  constructor(...args) {\n    super(...args);\n    this._isMounted = false;\n    this.state = {\n      selectedFile: null,\n      base64img: null,\n      errorMessage: '',\n      diKlik: false,\n      check: false,\n      submit: false\n    };\n\n    this.onChangeHandler = event => {\n      //untuk mendapatkan file image\n      this.setState({\n        selectedFile: event.target.files[0]\n      });\n    };\n\n    this.valueHandler = () => {\n      return this.state.selectedFile ? this.state.selectedFile.name : \"Browse Image\";\n    };\n\n    this.btnSimpanLayanan = () => {\n      var name = this.refs.namaLayanan.value;\n      this.setState({\n        submit: true\n      });\n\n      if (name === \"\" || this.state.selectedFile === null) {\n        this.setState({\n          errorMessage: \"Nama Layanan atau Gambar kosong\",\n          submit: false\n        });\n      } else if (name.trim() === \"\") {\n        this.setState({\n          errorMessage: \"Nama Layanan kosong - Harap Cek ulang\",\n          submit: false\n        });\n      } else if (this.state.selectedFile.size > 1000000) {\n        this.setState({\n          errorMessage: \"Gambar tidak boleh lebih dari 1 MB - Harap Cek ulang\",\n          submit: false\n        });\n      } else {\n        var pic = this.state.selectedFile;\n        var reader = new FileReader();\n        reader.readAsDataURL(pic);\n\n        reader.onload = () => {\n          var arr = reader.result.split(\",\");\n          var image = arr[1].toString();\n          var status = this.state.check ? \"active\" : \"inactive\";\n          var newData = {\n            name,\n            status,\n            image\n          };\n          this.addLayananBtn(newData);\n        };\n\n        reader.onerror = function (error) {\n          this.setState({\n            errorMessage: \"Gambar gagal tersimpan\"\n          });\n        };\n      }\n    };\n\n    this.addLayananBtn = async function (param) {\n      const data = await addLayananFunction(param);\n\n      if (data) {\n        if (!data.error) {\n          swal(\"Success\", \"Layanan berhasil di tambah\", \"success\");\n          this.setState({\n            errorMessage: null,\n            diKlik: true\n          });\n        } else {\n          this.setState({\n            errorMessage: data.error,\n            submit: false\n          });\n        }\n      }\n    };\n\n    this.btnCancel = () => {\n      this.setState({\n        diKlik: true\n      });\n    };\n\n    this.handleChecked = e => {\n      this.setState({\n        check: !this.state.check\n      });\n    };\n\n    this.renderBtnSumbit = () => {\n      if (this.state.submit) {\n        return React.createElement(\"input\", {\n          type: \"button\",\n          disabled: true,\n          className: \"btn btn-success ml-3 mr-3\",\n          value: \"Simpan\",\n          onClick: this.btnSimpanLayanan,\n          style: {\n            cursor: \"wait\"\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 89\n          },\n          __self: this\n        });\n      } else {\n        return React.createElement(\"input\", {\n          type: \"button\",\n          className: \"btn btn-success ml-3 mr-3\",\n          value: \"Simpan\",\n          onClick: this.btnSimpanLayanan,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 91\n          },\n          __self: this\n        });\n      }\n    };\n  }\n\n  componentDidMount() {\n    this._isMounted = true;\n  }\n\n  componentWillUnmount() {\n    this._isMounted = false;\n  }\n\n  UNSAFE_componentWillReceiveProps(newProps) {\n    this.setState({\n      errorMessage: newProps.error\n    });\n  }\n\n  render() {\n    if (this.state.diKlik) {\n      return React.createElement(Redirect, {\n        to: \"/listlayanan\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 98\n        },\n        __self: this\n      });\n    }\n\n    if (getToken()) {\n      return React.createElement(\"div\", {\n        className: \"container\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 103\n        },\n        __self: this\n      }, React.createElement(\"h2\", {\n        className: \"mt-3\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 104\n        },\n        __self: this\n      }, \"Layanan Tambah\"), React.createElement(\"hr\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 106\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        className: \"form-group row\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 107\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"col-12\",\n        style: {\n          color: \"red\",\n          fontSize: \"15px\",\n          textAlign: 'center'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 108\n        },\n        __self: this\n      }, this.state.errorMessage)), React.createElement(\"div\", {\n        className: \"form-group row\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 112\n        },\n        __self: this\n      }, React.createElement(\"label\", {\n        className: \"col-sm-3 col-form-label\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 113\n        },\n        __self: this\n      }, \"Nama Layanan\"), React.createElement(\"div\", {\n        className: \"col-sm-9\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 114\n        },\n        __self: this\n      }, React.createElement(\"input\", {\n        type: \"text\",\n        placeholder: \"Masukan Nama Layanan\",\n        style: {\n          width: \"50%\",\n          marginLeft: \"13%\"\n        },\n        className: \"form-control\",\n        ref: \"namaLayanan\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 115\n        },\n        __self: this\n      }))), React.createElement(\"div\", {\n        className: \"form-group row\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 118\n        },\n        __self: this\n      }, React.createElement(\"label\", {\n        className: \"col-sm-3 col-form-label\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 119\n        },\n        __self: this\n      }, \"Gambar\"), React.createElement(\"div\", {\n        className: \"col-sm-9\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 120\n        },\n        __self: this\n      }, React.createElement(\"input\", {\n        className: \"AddStyleButton btn btn-primary\",\n        type: \"button\",\n        onClick: () => this.refs.input.click(),\n        value: this.valueHandler(),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 121\n        },\n        __self: this\n      }), React.createElement(\"input\", {\n        ref: \"input\",\n        style: {\n          display: \"none\"\n        },\n        type: \"file\",\n        accept: \"image/*\",\n        onChange: this.onChangeHandler,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 122\n        },\n        __self: this\n      }))), React.createElement(\"div\", {\n        className: \"form-group row\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 125\n        },\n        __self: this\n      }, React.createElement(\"label\", {\n        className: \"col-sm-3 col-form-label\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 126\n        },\n        __self: this\n      }, \"Status\"), React.createElement(\"div\", {\n        className: \"col-sm-9\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 127\n        },\n        __self: this\n      }, React.createElement(\"input\", {\n        className: \"form-check-input messageCheckbox AddStyleButtonCheckbox\",\n        type: \"checkbox\",\n        onChange: this.handleChecked,\n        defaultChecked: this.state.check,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 128\n        },\n        __self: this\n      }), React.createElement(\"label\", {\n        style: {\n          position: \"relative\",\n          left: \"18%\",\n          paddingTop: \"3px\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 129\n        },\n        __self: this\n      }, this.state.check ? 'Aktif' : 'Tidak Aktif'))), React.createElement(\"div\", {\n        className: \"form-group row\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 132\n        },\n        __self: this\n      }, this.renderBtnSumbit(), React.createElement(\"input\", {\n        type: \"button\",\n        className: \"btn btn-warning\",\n        value: \"Batal\",\n        onClick: this.btnCancel,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 134\n        },\n        __self: this\n      })));\n    }\n\n    if (!getToken()) {\n      return React.createElement(Redirect, {\n        to: \"/login\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 142\n        },\n        __self: this\n      });\n    }\n  }\n\n}\n\nexport default LayananAdd;","map":{"version":3,"sources":["C:/Users/pc/Desktop/asira_core/src/components/layanan/layananAdd.js"],"names":["React","Redirect","swal","addLayananFunction","getToken","LayananAdd","Component","_isMounted","state","selectedFile","base64img","errorMessage","diKlik","check","submit","onChangeHandler","event","setState","target","files","valueHandler","name","btnSimpanLayanan","refs","namaLayanan","value","trim","size","pic","reader","FileReader","readAsDataURL","onload","arr","result","split","image","toString","status","newData","addLayananBtn","onerror","error","param","data","btnCancel","handleChecked","e","renderBtnSumbit","cursor","componentDidMount","componentWillUnmount","UNSAFE_componentWillReceiveProps","newProps","render","color","fontSize","textAlign","width","marginLeft","input","click","display","position","left","paddingTop"],"mappings":"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","sourcesContent":["import React from 'react'\r\nimport './../../support/css/layananAdd.css'\r\nimport { Redirect } from 'react-router-dom'\r\nimport swal from 'sweetalert'\r\nimport { addLayananFunction } from './saga';\r\nimport { getToken } from '../index/token';\r\n\r\nclass LayananAdd extends React.Component{\r\n    _isMounted = false;\r\n\r\n    state={\r\n        selectedFile:null,\r\n        base64img:null,\r\n        errorMessage:'',\r\n        diKlik:false,\r\n        check:false,submit:false\r\n    }\r\n    componentDidMount(){\r\n        this._isMounted=true\r\n    }\r\n    componentWillUnmount(){\r\n        this._isMounted=false\r\n    }\r\n\r\n    UNSAFE_componentWillReceiveProps(newProps){\r\n        this.setState({errorMessage:newProps.error})\r\n    }\r\n    \r\n    onChangeHandler = (event)=>{\r\n        //untuk mendapatkan file image\r\n        this.setState({selectedFile:event.target.files[0]})\r\n    }\r\n    valueHandler = ()=>{\r\n        \r\n        return  this.state.selectedFile ? this.state.selectedFile.name :\"Browse Image\"\r\n        \r\n    }\r\n\r\n    btnSimpanLayanan = ()=>{\r\n        var name =this.refs.namaLayanan.value\r\n        this.setState({submit:true})\r\n        if(name===\"\" || this.state.selectedFile===null){\r\n            this.setState({errorMessage:\"Nama Layanan atau Gambar kosong\",submit:false})\r\n        }else if(name.trim() === \"\"){\r\n            this.setState({errorMessage:\"Nama Layanan kosong - Harap Cek ulang\",submit:false})\r\n        }else if(this.state.selectedFile.size > 1000000){\r\n            this.setState({errorMessage:\"Gambar tidak boleh lebih dari 1 MB - Harap Cek ulang\",submit:false})\r\n        }\r\n        else{\r\n            var pic = this.state.selectedFile\r\n            var reader = new FileReader();\r\n            reader.readAsDataURL(pic);\r\n            reader.onload =  () => {   \r\n                var arr = reader.result.split(\",\")   \r\n                var image = arr[1].toString()\r\n                var status = this.state.check ? \"active\": \"inactive\"\r\n                var newData = {name,status,image}\r\n\r\n                this.addLayananBtn(newData)\r\n            };\r\n            reader.onerror = function (error) {\r\n              this.setState({errorMessage:\"Gambar gagal tersimpan\"})\r\n            };\r\n        }\r\n        \r\n    }\r\n\r\n    addLayananBtn = async function (param){\r\n        const data = await addLayananFunction(param)\r\n        if(data){\r\n            if(!data.error){\r\n                swal(\"Success\",\"Layanan berhasil di tambah\",\"success\")\r\n                this.setState({errorMessage:null,diKlik:true})\r\n            }else{\r\n                this.setState({errorMessage:data.error,submit:false})\r\n            }\r\n        }\r\n    }\r\n\r\n    btnCancel = ()=>{\r\n        this.setState({diKlik:true})\r\n    }\r\n    handleChecked=(e)=>{\r\n        this.setState({check:!this.state.check})\r\n    }\r\n\r\n    renderBtnSumbit =()=>{\r\n        if( this.state.submit) {\r\n            return <input type=\"button\" disabled className=\"btn btn-success ml-3 mr-3\" value=\"Simpan\" onClick={this.btnSimpanLayanan} style={{cursor:\"wait\"}}/>\r\n        }else{\r\n            return   <input type=\"button\" className=\"btn btn-success ml-3 mr-3\" value=\"Simpan\" onClick={this.btnSimpanLayanan}/>\r\n     \r\n        }\r\n     }\r\n\r\n    render(){\r\n        if(this.state.diKlik){\r\n            return <Redirect to='/listlayanan'/>            \r\n\r\n        }\r\n        if(getToken()){\r\n            return(\r\n                <div className=\"container\">\r\n                   <h2 className=\"mt-3\">Layanan Tambah</h2>\r\n                  \r\n                   <hr/>\r\n                   <div className=\"form-group row\">\r\n                            <div className=\"col-12\" style={{color:\"red\",fontSize:\"15px\",textAlign:'center'}}>\r\n                                    {this.state.errorMessage}\r\n                            </div>   \r\n                    </div>\r\n                   <div className=\"form-group row\">\r\n                            <label className=\"col-sm-3 col-form-label\">Nama Layanan</label>\r\n                            <div className=\"col-sm-9\">\r\n                            <input type=\"text\" placeholder=\"Masukan Nama Layanan\" style={{width:\"50%\",marginLeft:\"13%\"}} className=\"form-control\" ref=\"namaLayanan\"></input>                            \r\n                            </div>\r\n                    </div>\r\n                    <div className=\"form-group row\">\r\n                            <label className=\"col-sm-3 col-form-label\">Gambar</label>\r\n                            <div className=\"col-sm-9\">\r\n                            <input className=\"AddStyleButton btn btn-primary\" type=\"button\" onClick={()=>this.refs.input.click()} value={this.valueHandler()}></input>\r\n                            <input ref=\"input\" style={{display:\"none\"}} type=\"file\" accept=\"image/*\" onChange={this.onChangeHandler}></input>             \r\n                            </div>\r\n                    </div>\r\n                    <div className=\"form-group row\">\r\n                            <label className=\"col-sm-3 col-form-label\">Status</label>\r\n                            <div className=\"col-sm-9\">\r\n                            <input className=\"form-check-input messageCheckbox AddStyleButtonCheckbox\" type=\"checkbox\" onChange={this.handleChecked} defaultChecked={this.state.check} /> \r\n                            <label style={{position:\"relative\",left:\"18%\",paddingTop:\"3px\"}}>{this.state.check ? 'Aktif' : 'Tidak Aktif'}</label>           \r\n                            </div>\r\n                    </div>\r\n                    <div className=\"form-group row\">\r\n                            {this.renderBtnSumbit()}\r\n                            <input type=\"button\" className=\"btn btn-warning\" value=\"Batal\" onClick={this.btnCancel}/>\r\n\r\n                    </div>\r\n                </div>\r\n            )\r\n        }\r\n        if(!getToken()){\r\n            return (\r\n                <Redirect to='/login' />\r\n            )    \r\n        }\r\n       \r\n    }\r\n}\r\n\r\nexport default LayananAdd;"]},"metadata":{},"sourceType":"module"}