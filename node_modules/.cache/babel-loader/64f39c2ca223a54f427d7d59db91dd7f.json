{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\pc\\\\Desktop\\\\asira_core\\\\src\\\\components\\\\logs\\\\activitylog.js\";\nimport React from 'react';\nimport { getToken } from '../index/token';\nimport { Redirect } from 'react-router-dom';\nimport SearchBar from './../subComponent/SearchBar';\nimport DatePickers from './../subComponent/DatePicker';\nimport { getAllActivityLog } from './saga';\n\nclass ActivityLog extends React.Component {\n  constructor(...args) {\n    super(...args);\n    this._isMounted = false;\n    this.state = {\n      errorMessage: '',\n      tanggalAwal: null,\n      tanggalAkhir: null,\n      search: '',\n      dropDownApp: 'blank',\n      message: []\n    };\n\n    this.getAllLog = async function () {\n      const param = {};\n      const data = await getAllActivityLog(param);\n\n      if (data) {\n        console.log(data);\n        this.setState({\n          message: data.activityLog.data[0].messages\n        });\n      }\n    };\n\n    this.handleDropDownLog = e => {\n      this.setState({\n        dropDownApp: e.target.value\n      });\n    };\n\n    this.handleStartChange = e => {\n      this.setState({\n        tanggalAwal: e.target.value.toString().trim().length !== 0 ? e.target.value : null,\n        errorMessage: ''\n      });\n    };\n\n    this.handleEndChange = e => {\n      this.setState({\n        tanggalAkhir: e.target.value.toString().trim().length !== 0 ? e.target.value : null,\n        errorMessage: ''\n      });\n    };\n\n    this.fieldSearch = e => {\n      this.setState({\n        search: e.target.value\n      });\n    };\n\n    this.searchLog = () => {\n      const _this$state = this.state,\n            search = _this$state.search,\n            tanggalAkhir = _this$state.tanggalAkhir,\n            tanggalAwal = _this$state.tanggalAwal,\n            dropDownApp = _this$state.dropDownApp;\n      let param = {};\n\n      if (dropDownApp !== 'blank') {\n        // filter += `&client=${dropDownApp}`\n        param.client = dropDownApp;\n      }\n\n      if (!isNaN(search) && search.trim().length > 0) {\n        // filter += `&id=${search}`\n        param.id = search;\n      }\n\n      if (tanggalAkhir && tanggalAwal) {\n        // filter +=`start_date=${tanggalAwal}&end_date=${tanggalAkhir}`\n        param.start_date = tanggalAwal;\n        param.end_date = tanggalAkhir;\n      }\n    };\n\n    this.resetLog = () => {\n      this.setState({\n        errorMessage: \"\",\n        tanggalAkhir: '01-01-2020',\n        tanggalAwal: '01-02-2020'\n      });\n      document.getElementById(\"dropDown\").value = \"blank\";\n    };\n  }\n\n  componentWillUnmount() {\n    this._isMounted = false;\n  }\n\n  componentDidMount() {\n    this._isMounted = true;\n    this.getAllLog();\n  }\n\n  render() {\n    if (getToken()) {\n      return React.createElement(\"div\", {\n        className: \"container\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 89\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"row\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 90\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"col col-md col-xs\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 91\n        },\n        __self: this\n      }, React.createElement(\"h2\", {\n        className: \"mt-3\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 92\n        },\n        __self: this\n      }, \"Activity Log \", this.state.message), React.createElement(\"hr\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 93\n        },\n        __self: this\n      }))), React.createElement(\"div\", {\n        className: \"form-group row\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 97\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"col-12\",\n        style: {\n          color: \"red\",\n          fontSize: \"15px\",\n          textAlign: 'center'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 98\n        },\n        __self: this\n      }, this.state.errorMessageField)), React.createElement(\"div\", {\n        className: \"form-group row\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 102\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"col-4 col-md-4 col-xs-4\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 103\n        },\n        __self: this\n      }, React.createElement(SearchBar, {\n        onChange: this.fieldSearch,\n        placeholder: \"User ID\",\n        value: this.state.search,\n        id: \"searchField\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 104\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        className: \" col-8 col-md-8 col-xs-8 form-inline\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 111\n        },\n        __self: this\n      }, React.createElement(DatePickers, {\n        id: \"tanggalAwal\",\n        label: \"Dari Tanggal\",\n        onChange: this.handleStartChange,\n        value: this.state.tanggalAwal,\n        error: this.state.errorMessage && this.state.errorMessage.trim().length !== 0 && true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 112\n        },\n        __self: this\n      }), React.createElement(DatePickers, {\n        id: \"tanggalAkhir\",\n        label: \"Sampai Tanggal\",\n        onChange: this.handleEndChange,\n        value: this.state.tanggalAkhir,\n        error: this.state.errorMessage && this.state.errorMessage.trim().length !== 0 && true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 120\n        },\n        __self: this\n      }), React.createElement(\"select\", {\n        id: \"dropDown\",\n        onChange: this.handleDropDownLog,\n        className: \"form-control\",\n        style: {\n          border: \"1px solid black\",\n          marginLeft: \"20px\",\n          width: \"150px\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 128\n        },\n        __self: this\n      }, React.createElement(\"option\", {\n        value: \"blank\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 129\n        },\n        __self: this\n      }, \"--- App Filter ---\"), React.createElement(\"option\", {\n        value: \"all\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 130\n        },\n        __self: this\n      }, \"All\"), React.createElement(\"option\", {\n        value: \"m\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 131\n        },\n        __self: this\n      }, \"Mobile App\"), React.createElement(\"option\", {\n        value: \"bd\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 132\n        },\n        __self: this\n      }, \"Bank Dashboard\"), React.createElement(\"option\", {\n        value: \"c\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 133\n        },\n        __self: this\n      }, \"Core\")), React.createElement(\"input\", {\n        type: \"button\",\n        style: {\n          marginLeft: \"5px\",\n          marginTop: \"5px\"\n        },\n        onClick: this.searchLog,\n        className: \"form-control btn btn-success\",\n        value: \"Filter\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 136\n        },\n        __self: this\n      }), React.createElement(\"input\", {\n        type: \"button\",\n        style: {\n          marginLeft: \"5px\",\n          marginTop: \"5px\"\n        },\n        onClick: this.resetLog,\n        className: \"form-control btn btn-danger\",\n        value: \"Reset\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 137\n        },\n        __self: this\n      }))), React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 142\n        },\n        __self: this\n      }, React.createElement(\"table\", {\n        className: \"table table-hover\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 144\n        },\n        __self: this\n      }, React.createElement(\"thead\", {\n        className: \"table-warning\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 145\n        },\n        __self: this\n      }, React.createElement(\"tr\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 146\n        },\n        __self: this\n      }, React.createElement(\"th\", {\n        className: \"text-center\",\n        scope: \"col\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 147\n        },\n        __self: this\n      }, \"Level\"), React.createElement(\"th\", {\n        className: \"text-center\",\n        scope: \"col\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 148\n        },\n        __self: this\n      }, \"Time\"), React.createElement(\"th\", {\n        className: \"text-center\",\n        scope: \"col\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 149\n        },\n        __self: this\n      }, \"Application\"), React.createElement(\"th\", {\n        className: \"text-center\",\n        scope: \"col\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 150\n        },\n        __self: this\n      }, \"User ID\"), React.createElement(\"th\", {\n        className: \"text-center\",\n        scope: \"col\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 151\n        },\n        __self: this\n      }, \"User Name\"), React.createElement(\"th\", {\n        className: \"text-center\",\n        scope: \"col\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 152\n        },\n        __self: this\n      }, \"Full Name\"), React.createElement(\"th\", {\n        className: \"text-center\",\n        scope: \"col\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 153\n        },\n        __self: this\n      }, \"Activity\"), React.createElement(\"th\", {\n        className: \"text-center\",\n        scope: \"col\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 154\n        },\n        __self: this\n      }, \"Message\"))))));\n    }\n\n    if (!getToken()) {\n      return React.createElement(Redirect, {\n        to: \"/login\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 164\n        },\n        __self: this\n      });\n    }\n  }\n\n}\n\nexport default ActivityLog;","map":{"version":3,"sources":["C:/Users/pc/Desktop/asira_core/src/components/logs/activitylog.js"],"names":["React","getToken","Redirect","SearchBar","DatePickers","getAllActivityLog","ActivityLog","Component","_isMounted","state","errorMessage","tanggalAwal","tanggalAkhir","search","dropDownApp","message","getAllLog","param","data","console","log","setState","activityLog","messages","handleDropDownLog","e","target","value","handleStartChange","toString","trim","length","handleEndChange","fieldSearch","searchLog","client","isNaN","id","start_date","end_date","resetLog","document","getElementById","componentWillUnmount","componentDidMount","render","color","fontSize","textAlign","errorMessageField","border","marginLeft","width","marginTop"],"mappings":"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","sourcesContent":["import React from 'react'\r\nimport { getToken } from '../index/token'\r\nimport { Redirect } from 'react-router-dom'\r\nimport SearchBar from './../subComponent/SearchBar'\r\nimport DatePickers from './../subComponent/DatePicker'\r\nimport { getAllActivityLog } from './saga'\r\n\r\nclass ActivityLog extends React.Component{\r\n    _isMounted = false\r\n\r\n    state={\r\n        errorMessage:'',\r\n        tanggalAwal:null,\r\n        tanggalAkhir:null,\r\n        search:'',\r\n        dropDownApp:'blank',\r\n        message:[]\r\n      \r\n    }\r\n    componentWillUnmount(){\r\n        this._isMounted=false\r\n    }\r\n    \r\n    componentDidMount(){\r\n        this._isMounted=true\r\n        this.getAllLog()\r\n    }\r\n\r\n    getAllLog = async function () {\r\n        \r\n        const param ={}\r\n        const data = await getAllActivityLog(param)\r\n\r\n        if(data){\r\n            console.log(data)\r\n            \r\n            this.setState({message:data.activityLog.data[0].messages})\r\n        }\r\n    }\r\n    \r\n    handleDropDownLog = (e)=>{\r\n        this.setState({dropDownApp:e.target.value})\r\n\r\n    }\r\n\r\n    // HANDLE TANGGAL UNTUK SEARCH\r\n    handleStartChange = (e)=>{\r\n        this.setState({tanggalAwal:e.target.value.toString().trim().length !== 0 ? e.target.value : null,errorMessage:''})\r\n    }\r\n    handleEndChange = (e)=>{\r\n        this.setState({tanggalAkhir:e.target.value.toString().trim().length !== 0 ? e.target.value : null,errorMessage:''})\r\n    }\r\n    fieldSearch = (e) =>{\r\n        this.setState({search:e.target.value})\r\n    }\r\n    // HANDLE UNTUK BUTTON FILTER SEARCH LOG\r\n    searchLog = ()=>{\r\n        const {search,tanggalAkhir,tanggalAwal,dropDownApp} = this.state\r\n        let param ={}\r\n       \r\n        if(dropDownApp !== 'blank'){\r\n            // filter += `&client=${dropDownApp}`\r\n            param.client = dropDownApp\r\n        }if (!isNaN(search) && search.trim().length>0){\r\n            // filter += `&id=${search}`\r\n            param.id = search\r\n        }if (tanggalAkhir && tanggalAwal){\r\n            // filter +=`start_date=${tanggalAwal}&end_date=${tanggalAkhir}`\r\n            param.start_date = tanggalAwal\r\n            param.end_date = tanggalAkhir\r\n        }\r\n\r\n        \r\n    }\r\n\r\n    // HANDLE UNTUK RESET FILTER SEARCH LOG\r\n    resetLog = ()=>{\r\n        this.setState({errorMessage:\"\",tanggalAkhir:'01-01-2020',tanggalAwal:'01-02-2020'})\r\n        document.getElementById(\"dropDown\").value = \"blank\"\r\n\r\n\r\n\r\n    }\r\n\r\n\r\n    render(){   \r\n        if(getToken()){\r\n            return(\r\n                <div className=\"container\">\r\n                     <div className=\"row\">\r\n                        <div className=\"col col-md col-xs\">\r\n                             <h2 className=\"mt-3\">Activity Log {this.state.message}</h2>\r\n                             <hr></hr>\r\n                        </div>\r\n                        \r\n                    </div>\r\n                    <div className=\"form-group row\">\r\n                            <div className=\"col-12\" style={{color:\"red\",fontSize:\"15px\",textAlign:'center'}}>\r\n                                {this.state.errorMessageField}\r\n                            </div>      \r\n                     </div>\r\n                    <div className=\"form-group row\">\r\n                        <div className=\"col-4 col-md-4 col-xs-4\">\r\n                        <SearchBar \r\n                            onChange={this.fieldSearch}\r\n                            placeholder=\"User ID\"\r\n                            value={this.state.search}\r\n                            id=\"searchField\"\r\n                        />\r\n                        </div>\r\n                        <div className=\" col-8 col-md-8 col-xs-8 form-inline\">\r\n                                    <DatePickers\r\n                                        id=\"tanggalAwal\"\r\n                                        label = 'Dari Tanggal'\r\n                                        onChange ={this.handleStartChange}\r\n                                        value= {this.state.tanggalAwal}\r\n                                        error={this.state.errorMessage && this.state.errorMessage.trim().length !== 0 && true}\r\n                                    />\r\n    \r\n                                    <DatePickers\r\n                                        id=\"tanggalAkhir\"\r\n                                        label = 'Sampai Tanggal'\r\n                                        onChange ={this.handleEndChange}\r\n                                        value= {this.state.tanggalAkhir}\r\n                                        error={this.state.errorMessage && this.state.errorMessage.trim().length !== 0 && true}\r\n                                    />\r\n\r\n                                    <select id=\"dropDown\" onChange={this.handleDropDownLog} className=\"form-control\" style={{border:\"1px solid black\",marginLeft:\"20px\",width:\"150px\"}}>\r\n                                        <option value=\"blank\">--- App Filter ---</option>\r\n                                        <option value=\"all\">All</option>\r\n                                        <option value=\"m\">Mobile App</option>\r\n                                        <option value=\"bd\">Bank Dashboard</option>\r\n                                        <option value=\"c\">Core</option>\r\n                                    </select>\r\n\r\n                                    <input type=\"button\" style={{marginLeft:\"5px\",marginTop:\"5px\"}} onClick={this.searchLog} className=\"form-control btn btn-success\" value=\"Filter\"></input>\r\n                                    <input type=\"button\" style={{marginLeft:\"5px\",marginTop:\"5px\"}} onClick={this.resetLog} className=\"form-control btn btn-danger\" value=\"Reset\"></input>\r\n\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div>\r\n                        \r\n                        <table className=\"table table-hover\">\r\n                                <thead className=\"table-warning\">\r\n                                <tr >\r\n                                        <th className=\"text-center\" scope=\"col\">Level</th>\r\n                                        <th className=\"text-center\" scope=\"col\">Time</th>\r\n                                        <th className=\"text-center\" scope=\"col\">Application</th>\r\n                                        <th className=\"text-center\" scope=\"col\">User ID</th>\r\n                                        <th className=\"text-center\" scope=\"col\">User Name</th>  \r\n                                        <th className=\"text-center\" scope=\"col\">Full Name</th>  \r\n                                        <th className=\"text-center\" scope=\"col\">Activity</th> \r\n                                        <th className=\"text-center\" scope=\"col\">Message</th> \r\n                                </tr>   \r\n                        </thead></table>\r\n\r\n                        </div>\r\n                </div>\r\n            )\r\n        }\r\n        if(!getToken()){\r\n            return (\r\n                <Redirect to='/login' />\r\n            )    \r\n        }\r\n\r\n    }\r\n    \r\n}\r\n\r\nexport default ActivityLog"]},"metadata":{},"sourceType":"module"}